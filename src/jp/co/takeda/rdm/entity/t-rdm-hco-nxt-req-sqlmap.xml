<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="t_rdm_hco_nxt_req">
    <resultMap id="tRdmHcoNxtReqResultMap" type="jp.co.takeda.rdm.entity.join.TRdmHcoNxtReqEntity">
		<result column="REQ_ID" property="reqId"/>
		<result column="INS_NO" property="insNo"/>
		<result column="PHARM_TYPE" property="pharmType"/>
		<result column="HO_INS_TYPE" property="hoInsType"/>
		<result column="REG_VIS_TYPE" property="regVisType"/>
		<result column="INS_RANK" property="insRank"/>
		<result column="IMP_HOS_TYPE" property="impHosType"/>
		<result column="MANAGE_CD" property="manageCd"/>
		<result column="VAC_INS_TYPE" property="vacInsType"/>
		<result column="VAC_VISIT_TYPE" property="vacVisitType"/>
		<result column="BEDCNT_BASE" property="bedcntBase"/>
		<result column="BEDCNT04" property="bedcnt04"/>
		<result column="BEDCNT01" property="bedcnt01"/>
		<result column="BEDCNT05" property="bedcnt05"/>
		<result column="BEDCNT07" property="bedcnt07"/>
		<result column="BEDCNT02" property="bedcnt02"/>
		<result column="BEDCNT03" property="bedcnt03"/>
		<result column="BEDCNT06" property="bedcnt06"/>
		<result column="BEDS_TOT" property="bedsTot"/>
		<result column="MED_BEDS_TOT" property="medBedsTot"/>
		<result column="INS_SHA_YMD" property="insShaYmd"/>
		<result column="INS_SHA_ID" property="insShaId"/>
		<result column="UPD_SHA_YMD" property="updShaYmd"/>
		<result column="UPD_SHA_ID" property="updShaId"/>
    </resultMap>
    <resultMap id="nF101MainDataResultMap" type="jp.co.takeda.rdm.entity.join.SelectNF101MainDataEntity">
        <result column="REQ_ID" property="reqId"/>
        <result column="REQ_CHL" property="reqChl"/>
        <result column="REQ_SHZ" property="reqShzNm"/>
        <result column="REQ_STS_NM" property="reqStsNm"/>
        <result column="REQ_JGI_NAME" property="reqJgiName"/>
        <result column="REQ_YMDHMS" property="reqYmdhms"/>
        <result column="SHN_SHA_ID" property="shnShaName"/>
        <result column="SHN_YMDHMS" property="shnYmdhms"/>
        <result column="APR_SHA_ID" property="aprShaName"/>
        <result column="APR_YMDHMS" property="aprYmdhms"/>
        <result column="REQ_JGI_NO" property="reqJgiNo"/>
        <result column="REQ_BR_CODE" property="reqBrCd"/>
        <result column="REQ_DIST_CODE" property="reqDistCd"/>
        <result column="REQ_STS" property="reqStsCd"/>
        <result column="SHN_JGI_NO" property="shnJgiNo"/>
        <result column="APR_JGI_NO" property="aprJgiNo"/>
        <result column="UPD_SHA_YMD" property="updShaYmd"/>
        <result column="INS_NO" property="insNo"/>
        <result column="INS_TYPE" property="insType"/>
        <result column="INS_ABBR_NAME" property="insAbbrName"/>
        <result column="ULT_INS_NO" property="ultInsNo"/>
        <result column="SHISETSU_NM_RYAKU" property="shisetsuNmRyaku"/>
        <result column="PHARM_TYPE" property="pharmType"/>
        <result column="INS_RANK" property="insRank"/>
        <result column="REG_VIS_TYPE" property="regVisType"/>
        <result column="IMP_HOS_TYPE" property="impHosType"/>
        <result column="HO_INS_TYPE" property="hoInsType"/>
        <result column="MANAGE_CD" property="manageCd"/>
        <result column="VAC_INS_TYPE" property="vacInsType"/>
        <result column="VAC_VISIT_TYPE" property="vacVisitType"/>
        <result column="PHARM_TYPE_NM" property="pharmTypeNm"/>
        <result column="INS_RANK_NM" property="insRankNm"/>
        <result column="REG_VIS_TYPE_NM" property="regVisTypeNm"/>
        <result column="IMP_HOS_TYPE_NM" property="impHosTypeNm"/>
        <result column="HO_INS_TYPE_NM" property="hoInsTypeNm"/>
        <result column="MANAGE_NM" property="manageNm"/>
        <result column="VAC_INS_TYPE_NM" property="vacInsTypeNm"/>
        <result column="VAC_VISIT_TYPE_NM" property="vacVisitTypeNm"/>
        <result column="ULT_PHARM_TYPE" property="shisetsuKbn"/>
        <result column="ULT_MANAGE_CD" property="keieitaiNm"/>
        <result column="NEXT_PHARM_TYPE" property="nextPharmType"/>
        <result column="NEXT_INS_RANK" property="nextInsRank"/>
        <result column="NEXT_REG_VIS_TYPE" property="nextRegVisType"/>
        <result column="NEXT_IMP_HOS_TYPE" property="nextImpHosType"/>
        <result column="NEXT_HO_INS_TYPE" property="nextHoInsType"/>
        <result column="NEXT_MANAGE_CD" property="nextManageCd"/>
        <result column="NEXT_VAC_INS_TYPE" property="nextVacInsType"/>
        <result column="NEXT_VAC_VISIT_TYPE" property="nextVacVisitType"/>
        <result column="BEDCNT_BASE" property="bedCntBase"/>
        <result column="BEDCNT04" property="bedCnt04"/>
        <result column="BEDCNT01" property="bedCnt01"/>
        <result column="BEDCNT05" property="bedCnt05"/>
        <result column="BEDCNT03" property="bedCnt03"/>
        <result column="BEDCNT07" property="bedCnt07"/>
        <result column="BEDCNT02" property="bedCnt02"/>
        <result column="BEDCNT06" property="bedCnt06"/>
        <result column="BEDS_TOT" property="bedsTot"/>
        <result column="MED_BEDS_TOT" property="medBedsTot"/>
        <result column="ULT_BEDCNT_BASE" property="ultBedCntBase"/>
        <result column="ULT_BEDCNT04" property="ultBedCnt04"/>
        <result column="ULT_BEDCNT01" property="ultBedCnt01"/>
        <result column="ULT_BEDCNT05" property="ultBedCnt05"/>
        <result column="ULT_BEDCNT03" property="ultBedCnt03"/>
        <result column="ULT_BEDCNT07" property="ultBedCnt07"/>
        <result column="NEXT_BEDCNT_BASE" property="nextBedCntBase"/>
        <result column="NEXT_BEDCNT04" property="nextBedCnt04"/>
        <result column="NEXT_BEDCNT01" property="nextBedCnt01"/>
        <result column="NEXT_BEDCNT05" property="nextBedCnt05"/>
        <result column="NEXT_BEDCNT03" property="nextBedCnt03"/>
        <result column="NEXT_BEDCNT07" property="nextBedCnt07"/>
        <result column="NEXT_BEDCNT02" property="nextBedCnt02"/>
        <result column="NEXT_BEDCNT06" property="nextBedCnt06"/>
        <result column="NEXT_BEDS_TOT" property="nextBedsTot"/>
        <result column="NEXT_MED_BEDS_TOT" property="nextMedBedsTot"/>
        <result column="REQ_COMMENT" property="reqComment"/>
        <result column="APR_MEMO" property="aprMemo"/>
        <result column="SHN_FLG" property="shnFlg"/>
        <result column="PHARM_TYPE_FLG" property="pharmTypeFlg"/>
        <result column="INS_RANK_FLG" property="insRankFlg"/>
        <result column="REG_VIS_TYPE_FLG" property="regVisTypeFlg"/>
        <result column="IMP_HOS_TYPE_FLG" property="impHosTypeFlg"/>
        <result column="MANAGE_CD_FLG" property="manageCdFlg"/>
        <result column="VAC_INS_TYPE_FLG" property="vacInsTypeFlg"/>
        <result column="VAC_VISIT_TYPE_FLG" property="vacVisitTypeFlg"/>
        <result column="BEDCNT_BASE_FLG" property="bedCntBaseFlg"/>
        <result column="BEDCNT04_FLG" property="bedCnt04Flg"/>
        <result column="BEDCNT01_FLG" property="bedCnt01Flg"/>
        <result column="BEDCNT05_FLG" property="bedCnt05Flg"/>
        <result column="BEDCNT03_FLG" property="bedCnt03Flg"/>
        <result column="BEDCNT07_FLG" property="bedCnt07Flg"/>
        <result column="BEDCNT02_FLG" property="bedCnt02Flg"/>
        <result column="BEDCNT06_FLG" property="bedCnt06Flg"/>
        <result column="BEDS_TOT_FLG" property="bedsTotFlg"/>
        <result column="MED_BEDS_TOT_FLG" property="medBedsTotFlg"/>
    </resultMap>
    <resultMap id="nF102MainDataResultMap" type="jp.co.takeda.rdm.entity.join.SelectNF102MainDataListEntity">
        <result column="REQ_STS_NM" property="reqStsNm"/>
        <result column="REQ_YMDHMS" property="reqYmdhms"/>
        <result column="PHARM_TYPE" property="pharmType"/>
        <result column="INS_RANK" property="insRank"/>
        <result column="REG_VIS_TYPE" property="regVisType"/>
        <result column="IMP_HOS_TYPE" property="impHosType"/>
        <result column="HO_INS_TYPE" property="hoInsType"/>
        <result column="MANAGE_NM" property="manageNm"/>
        <result column="VAC_INS_TYPE" property="vacInsType"/>
        <result column="VAC_VISIT_TYPE" property="vacVisitType"/>
        <result column="BEDCNT_BASE" property="bedCntBase"/>
        <result column="BEDCNT04" property="bedCnt04"/>
        <result column="BEDCNT01" property="bedCnt01"/>
        <result column="BEDCNT05" property="bedCnt05"/>
        <result column="BEDCNT03" property="bedCnt03"/>
        <result column="BEDCNT07" property="bedCnt07"/>
        <result column="BEDCNT02" property="bedCnt02"/>
        <result column="BEDCNT06" property="bedCnt06"/>
        <result column="BEDS_TOT" property="bedsTot"/>
        <result column="MED_BEDS_TOT" property="medBedsTot"/>
        <result column="REQ_COMMENT" property="reqComment"/>
        <result column="REQ_ID" property="reqId"/>
        <result column="REQ_JGI_NAME" property="reqJgiName"/>
        <result column="REQ_JGI_NO" property="reqJgiNo"/>
        <result column="REQ_SHZ" property="reqShzNm"/>
    </resultMap>
    <resultMap id="nF401MainDataResultMap" type="jp.co.takeda.rdm.entity.join.SelectNF401MainDataEntity">
        <result column="APR_WAIT_CNT" property="aprWaitCnt"/>
        <result column="INS_NO" property="insNo"/>
        <result column="INS_ABBR_NAME" property="insAbbrName"/>
        <result column="PHARM_TYPE" property="pharmType"/>
        <result column="INS_RANK" property="insRank"/>
        <result column="REG_VIS_TYPE" property="regVisType"/>
        <result column="IMP_HOS_TYPE" property="impHosType"/>
        <result column="HO_INS_TYPE" property="hoInsType"/>
        <result column="MANAGE_NM" property="manageNm"/>
        <result column="VAC_INS_TYPE" property="vacInsType"/>
        <result column="VAC_VISIT_TYPE" property="vacVisitType"/>
        <result column="BEDCNT_BASE" property="bedCntBase"/>
        <result column="BEDCNT04" property="bedCnt04"/>
        <result column="BEDCNT01" property="bedCnt01"/>
        <result column="BEDCNT05" property="bedCnt05"/>
        <result column="BEDCNT03" property="bedCnt03"/>
        <result column="BEDCNT07" property="bedCnt07"/>
        <result column="BEDCNT02" property="bedCnt02"/>
        <result column="BEDCNT06" property="bedCnt06"/>
        <result column="BEDS_TOT" property="bedsTot"/>
        <result column="MED_BEDS_TOT" property="medBedsTot"/>
        <result column="ULT_INS_NO" property="ultInsNo"/>
        <result column="SHISETSU_NM_RYAKU" property="shisetsuNmRyaku"/>
        <result column="SHISETSU_KBN" property="shisetsuKbn"/>
        <result column="KEIEITAI" property="keieitai"/>
        <result column="ULT_BEDCNT_BASE" property="ultBedCntBase"/>
        <result column="ULT_BEDCNT04" property="ultBedCnt04"/>
        <result column="ULT_BEDCNT01" property="ultBedCnt01"/>
        <result column="ULT_BEDCNT05" property="ultBedCnt05"/>
        <result column="ULT_BEDCNT03" property="ultBedCnt03"/>
        <result column="ULT_BEDCNT07" property="ultBedCnt07"/>
        <result column="NEXT_PHARM_TYPE" property="nextPharmType"/>
        <result column="NEXT_INS_RANK" property="nextInsRank"/>
        <result column="NEXT_REG_VIS_TYPE" property="nextRegVisType"/>
        <result column="NEXT_IMP_HOS_TYPE" property="nextImpHosType"/>
        <result column="NEXT_HO_INS_TYPE" property="nextHoInsType"/>
        <result column="NEXT_MANAGE_NM" property="nextManageNm"/>
        <result column="NEXT_VAC_INS_TYPE" property="nextVacInsType"/>
        <result column="NEXT_VAC_VISIT_TYPE" property="nextVacVisitType"/>
        <result column="NEXT_BEDCNT_BASE" property="nextBedCntBase"/>
        <result column="NEXT_BEDCNT04" property="nextBedCnt04"/>
        <result column="NEXT_BEDCNT01" property="nextBedCnt01"/>
        <result column="NEXT_BEDCNT05" property="nextBedCnt05"/>
        <result column="NEXT_BEDCNT03" property="nextBedCnt03"/>
        <result column="NEXT_BEDCNT07" property="nextBedCnt07"/>
        <result column="NEXT_BEDCNT02" property="nextBedCnt02"/>
        <result column="NEXT_BEDCNT06" property="nextBedCnt06"/>
        <result column="NEXT_BEDS_TOT" property="nextBedsTot"/>
        <result column="NEXT_MED_BEDS_TOT" property="nextMedBedsTot"/>
		<result column="NO_SHN_CNT" property="noShnCnt"/>
		<result column="REQ_COMMENT" property="reqComment"/>
		<result column="APR_COMMENT" property="aprComment"/>
        <result column="CNT" property="cnt"/>
    </resultMap>
    <resultMap id="nF401ReqDataResultMap" type="jp.co.takeda.rdm.entity.join.SelectNF401ReqDataEntity">
		<result column="REQ_ID" property="reqId"/>
		<result column="REQ_CHL" property="reqChl"/>
		<result column="INS_NO" property="insNo"/>
		<result column="UPD_SHA_YMD" property="updShaYmd"/>
    </resultMap>
        <resultMap id="nF403MainDataResultMap" type="jp.co.takeda.rdm.entity.join.SelectNF403MainDataEntity">
        <result column="INS_NO" property="insNo"/>
        <result column="INS_ABBR_NAME" property="insAbbrName"/>
        <result column="PHARM_TYPE" property="pharmType"/>
        <result column="INS_TYPE" property="insType"/>
        <result column="INS_RANK" property="insRank"/>
        <result column="REG_VIS_TYPE" property="regVisType"/>
        <result column="IMP_HOS_TYPE" property="impHosType"/>
        <result column="HO_INS_TYPE" property="hoInsType"/>
        <result column="MANAGE_CD" property="manageCd"/>
        <result column="VAC_INS_TYPE" property="vacInsType"/>
        <result column="VAC_VISIT_TYPE" property="vacVisitType"/>
        <result column="PHARM_TYPE_NM" property="pharmTypeNm"/>
        <result column="INS_RANK_NM" property="insRankNm"/>
        <result column="REG_VIS_TYPE_NM" property="regVisTypeNm"/>
        <result column="IMP_HOS_TYPE_NM" property="impHosTypeNm"/>
        <result column="HO_INS_TYPE_NM" property="hoInsTypeNm"/>
        <result column="MANAGE_NM" property="manageNm"/>
        <result column="VAC_INS_TYPE_NM" property="vacInsTypeNm"/>
        <result column="VAC_VISIT_TYPE_NM" property="vacVisitTypeNm"/>
        <result column="BEDCNT_BASE" property="bedCntBase"/>
        <result column="BEDCNT04" property="bedCnt04"/>
        <result column="BEDCNT01" property="bedCnt01"/>
        <result column="BEDCNT05" property="bedCnt05"/>
        <result column="BEDCNT03" property="bedCnt03"/>
        <result column="BEDCNT07" property="bedCnt07"/>
        <result column="BEDCNT02" property="bedCnt02"/>
        <result column="BEDCNT06" property="bedCnt06"/>
        <result column="BEDS_TOT" property="bedsTot"/>
        <result column="MED_BEDS_TOT" property="medBedsTot"/>
        <result column="ULT_INS_NO" property="ultInsNo"/>
        <result column="SHISETSU_NM_RYAKU" property="shisetsuNmRyaku"/>
        <result column="SHISETSU_KBN" property="shisetsuKbn"/>
        <result column="KEIEITAI" property="keieitai"/>
        <result column="ULT_BEDCNT_BASE" property="ultBedCntBase"/>
        <result column="ULT_BEDCNT04" property="ultBedCnt04"/>
        <result column="ULT_BEDCNT01" property="ultBedCnt01"/>
        <result column="ULT_BEDCNT05" property="ultBedCnt05"/>
        <result column="ULT_BEDCNT03" property="ultBedCnt03"/>
        <result column="ULT_BEDCNT07" property="ultBedCnt07"/>
        <result column="NEXT_PHARM_TYPE" property="nextPharmType"/>
        <result column="NEXT_INS_RANK" property="nextInsRank"/>
        <result column="NEXT_REG_VIS_TYPE" property="nextRegVisType"/>
        <result column="NEXT_IMP_HOS_TYPE" property="nextImpHosType"/>
        <result column="NEXT_HO_INS_TYPE" property="nextHoInsType"/>
        <result column="NEXT_MANAGE_NM" property="nextManageNm"/>
        <result column="NEXT_VAC_INS_TYPE" property="nextVacInsType"/>
        <result column="NEXT_VAC_VISIT_TYPE" property="nextVacVisitType"/>
        <result column="NEXT_BEDCNT_BASE" property="nextBedCntBase"/>
        <result column="NEXT_BEDCNT04" property="nextBedCnt04"/>
        <result column="NEXT_BEDCNT01" property="nextBedCnt01"/>
        <result column="NEXT_BEDCNT05" property="nextBedCnt05"/>
        <result column="NEXT_BEDCNT03" property="nextBedCnt03"/>
        <result column="NEXT_BEDCNT07" property="nextBedCnt07"/>
        <result column="NEXT_BEDCNT02" property="nextBedCnt02"/>
        <result column="NEXT_BEDCNT06" property="nextBedCnt06"/>
        <result column="NEXT_BEDS_TOT" property="nextBedsTot"/>
        <result column="NEXT_MED_BEDS_TOT" property="nextMedBedsTot"/>
		<result column="REQ_COMMENT" property="reqComment"/>
		<result column="ULT_DIF" property="ultDif"/>
		<result column="PHARM_TYPE_FLG" property="pharmTypeFlg"/>
        <result column="INS_RANK_FLG" property="insRankFlg"/>
        <result column="REG_VIS_TYPE_FLG" property="regVisTypeFlg"/>
        <result column="IMP_HOS_TYPE_FLG" property="impHosTypeFlg"/>
        <result column="HO_INS_TYPE_FLG" property="hoInsTypeFlg"/>
        <result column="MANAGE_CD_FLG" property="manageCdFlg"/>
        <result column="VAC_INS_TYPE_FLG" property="vacInsTypeFlg"/>
        <result column="VAC_VISIT_TYPE_FLG" property="vacVisitTypeFlg"/>
        <result column="BEDCNT_BASE_FLG" property="bedCntBaseFlg"/>
        <result column="BEDCNT04_FLG" property="bedCnt04Flg"/>
        <result column="BEDCNT01_FLG" property="bedCnt01Flg"/>
        <result column="BEDCNT05_FLG" property="bedCnt05Flg"/>
        <result column="BEDCNT03_FLG" property="bedCnt03Flg"/>
        <result column="BEDCNT07_FLG" property="bedCnt07Flg"/>
        <result column="BEDCNT02_FLG" property="bedCnt02Flg"/>
        <result column="BEDCNT06_FLG" property="bedCnt06Flg"/>
        <result column="BEDS_TOT_FLG" property="bedsTotFlg"/>
        <result column="MED_BEDS_TOT_FLG" property="medBedsTotFlg"/>
        <result column="UPD_SHA_YMD" property="updShaYmd"/>
        <result column="CNT" property="cnt"/>
    </resultMap>
    <insert id="insertByValue" parameterType="jp.co.takeda.rdm.entity.join.TRdmHcoNxtReqEntity">
        INSERT INTO
            T_RDM_HCO_NXT_REQ(<trim suffixOverrides=",">REQ_ID,<if test="insNo != null">INS_NO,</if><if test="pharmType != null">PHARM_TYPE,</if><if test="hoInsType != null">HO_INS_TYPE,</if><if test="regVisType != null">REG_VIS_TYPE,</if><if test="insRank != null">INS_RANK,</if><if test="impHosType != null">IMP_HOS_TYPE,</if><if test="manageCd != null">MANAGE_CD,</if><if test="vacInsType != null">VAC_INS_TYPE,</if><if test="vacVisitType != null">VAC_VISIT_TYPE,</if><if test="bedcntBase != null">BEDCNT_BASE,</if><if test="bedcnt04 != null">BEDCNT04,</if><if test="bedcnt01 != null">BEDCNT01,</if><if test="bedcnt05 != null">BEDCNT05,</if><if test="bedcnt07 != null">BEDCNT07,</if><if test="bedcnt02 != null">BEDCNT02,</if><if test="bedcnt03 != null">BEDCNT03,</if><if test="bedcnt06 != null">BEDCNT06,</if><if test="bedsTot != null">BEDS_TOT,</if><if test="medBedsTot != null">MED_BEDS_TOT,</if><if test="insShaYmd != null">INS_SHA_YMD,</if><if test="insShaId != null">INS_SHA_ID,</if><if test="updShaYmd != null">UPD_SHA_YMD,</if><if test="updShaId != null">UPD_SHA_ID,</if></trim>)
        VALUES
            (<trim suffixOverrides=",">#{reqId},<if test="insNo != null">#{insNo},</if><if test="pharmType != null">#{pharmType},</if><if test="hoInsType != null">#{hoInsType},</if><if test="regVisType != null">#{regVisType},</if><if test="insRank != null">#{insRank},</if><if test="impHosType != null">#{impHosType},</if><if test="manageCd != null">#{manageCd},</if><if test="vacInsType != null">#{vacInsType},</if><if test="vacVisitType != null">#{vacVisitType},</if><if test="bedcntBase != null">#{bedcntBase},</if><if test="bedcnt04 != null">#{bedcnt04},</if><if test="bedcnt01 != null">#{bedcnt01},</if><if test="bedcnt05 != null">#{bedcnt05},</if><if test="bedcnt07 != null">#{bedcnt07},</if><if test="bedcnt02 != null">#{bedcnt02},</if><if test="bedcnt03 != null">#{bedcnt03},</if><if test="bedcnt06 != null">#{bedcnt06},</if><if test="bedsTot != null">#{bedsTot},</if><if test="medBedsTot != null">#{medBedsTot},</if><if test="insShaYmd != null">#{insShaYmd},</if><if test="insShaId != null">#{insShaId},</if><if test="updShaYmd != null">#{updShaYmd},</if><if test="updShaId != null">#{updShaId},</if></trim>)
    </insert>
    <select id="selectByPK" parameterType="jp.co.takeda.rdm.entity.join.TRdmHcoNxtReqEntity" resultMap="tRdmHcoNxtReqResultMap">
        SELECT
            REQ_ID, INS_NO, PHARM_TYPE, HO_INS_TYPE, REG_VIS_TYPE, INS_RANK, IMP_HOS_TYPE, MANAGE_CD, VAC_INS_TYPE, VAC_VISIT_TYPE, BEDCNT_BASE, BEDCNT04, BEDCNT01, BEDCNT05, BEDCNT07, BEDCNT02, BEDCNT03, BEDCNT06, BEDS_TOT, MED_BEDS_TOT, INS_SHA_YMD, INS_SHA_ID, UPD_SHA_YMD, UPD_SHA_ID
		FROM
            T_RDM_HCO_NXT_REQ
        WHERE
            REQ_ID = #{reqId}
    </select>
    <select id="selectNF101INSData" parameterType="jp.co.takeda.rdm.entity.join.SelectNF101MainDataEntity" resultMap="nF101MainDataResultMap">
		WITH COLOR AS (
		SELECT
		  INS_NO
		, CASE WHEN PHARM_TYPE IS NULL THEN '0' ELSE '1' END AS PHARM_TYPE_FLG
		, CASE WHEN INS_RANK IS NULL THEN '0' ELSE '1' END AS INS_RANK_FLG
		, CASE WHEN REG_VIS_TYPE IS NULL THEN '0' ELSE '1' END AS REG_VIS_TYPE_FLG
		, CASE WHEN IMP_HOS_TYPE IS NULL THEN '0' ELSE '1' END AS IMP_HOS_TYPE_FLG
		, CASE WHEN HO_INS_TYPE IS NULL THEN '0' ELSE '1' END AS HO_INS_TYPE_FLG
		, CASE WHEN MANAGE_CD IS NULL THEN '0' ELSE '1' END AS MANAGE_CD_FLG
		, CASE WHEN VAC_INS_TYPE IS NULL THEN '0' ELSE '1' END AS VAC_INS_TYPE_FLG
		, CASE WHEN VAC_VISIT_TYPE IS NULL THEN '0' ELSE '1' END AS VAC_VISIT_TYPE_FLG
		, CASE WHEN BEDCNT_BASE IS NULL THEN '0' ELSE '1' END AS BEDCNT_BASE_FLG
		, CASE WHEN BEDCNT04 IS NULL THEN '0' ELSE '1' END AS BEDCNT04_FLG
		, CASE WHEN BEDCNT01 IS NULL THEN '0' ELSE '1' END AS BEDCNT01_FLG
		, CASE WHEN BEDCNT05 IS NULL THEN '0' ELSE '1' END AS BEDCNT05_FLG
		, CASE WHEN BEDCNT03 IS NULL THEN '0' ELSE '1' END AS BEDCNT03_FLG
		, CASE WHEN BEDCNT07 IS NULL THEN '0' ELSE '1' END AS BEDCNT07_FLG
		, CASE WHEN BEDCNT02 IS NULL THEN '0' ELSE '1' END AS BEDCNT02_FLG
		, CASE WHEN BEDCNT06 IS NULL THEN '0' ELSE '1' END AS BEDCNT06_FLG
		, CASE WHEN BEDS_TOT IS NULL THEN '0' ELSE '1' END AS BEDS_TOT_FLG
		, CASE WHEN MED_BEDS_TOT IS NULL THEN '0' ELSE '1' END AS MED_BEDS_TOT_FLG
		FROM(
			SELECT
			  HCO.INS_NO
			, MAX(HCO.PHARM_TYPE) AS PHARM_TYPE
			, MAX(HCO.INS_RANK) AS INS_RANK
			, MAX(HCO.REG_VIS_TYPE) AS REG_VIS_TYPE
			, MAX(HCO.IMP_HOS_TYPE) AS IMP_HOS_TYPE
			, MAX(HCO.HO_INS_TYPE) AS HO_INS_TYPE
			, MAX(HCO.MANAGE_CD) AS MANAGE_CD
			, MAX(HCO.VAC_INS_TYPE) AS VAC_INS_TYPE
			, MAX(HCO.VAC_VISIT_TYPE) AS VAC_VISIT_TYPE
			, MAX(HCO.BEDCNT_BASE) AS BEDCNT_BASE
			, MAX(HCO.BEDCNT04) AS BEDCNT04
			, MAX(HCO.BEDCNT01) AS BEDCNT01
			, MAX(HCO.BEDCNT05) AS BEDCNT05
			, MAX(HCO.BEDCNT03) AS BEDCNT03
			, MAX(HCO.BEDCNT07) AS BEDCNT07
			, MAX(HCO.BEDCNT02) AS BEDCNT02
			, MAX(HCO.BEDCNT06) AS BEDCNT06
			, MAX(HCO.BEDS_TOT) AS BEDS_TOT
			, MAX(HCO.MED_BEDS_TOT) AS MED_BEDS_TOT
			FROM
			T_RDM_REQ_KNR KNR -- 申請管理
			LEFT JOIN
			T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
			ON 1=1
			AND KNR.REQ_ID = HCO.REQ_ID
			WHERE 1=1
			AND KNR.INS_NO = #{inInsNo}
			AND KNR.REQ_TYPE = '21'
			AND KNR.REQ_STS IN ('03', '13', '04', '14')
			GROUP BY
			HCO.INS_NO
			)
		)

		SELECT
		  MST.INS_NO -- 施設_基本情報.施設固定コード
		, MST.INS_SBT AS INS_TYPE -- 施設_基本情報.施設種別
		, MST.INS_ABBR_NAME -- 施設_基本情報.施設略式漢字名
		, MST.ULT_INS_NO -- 施設_基本情報.ULT施設コード
		, MDB.SHISETSU_NM_RYAKU -- ULT_MDB施設マスタ.施設名略名
		, MST.PHARM_TYPE
		, MST.INS_RANK
		, MST.REG_VIS_TYPE
		, MST.IMP_HOS_TYPE
		, MST.HO_INS_TYPE
		, MST.MANAGE_CD
		, VAC.VAC_INS_TYPE
		, VAC.VAC_VISIT_TYPE
		, CDM_PHARMTYPE.VALUE1_KANJ AS PHARM_TYPE_NM -- 施設_基本情報.施設区分
		, CDM_INSRANK.VALUE1_KANJ AS INS_RANK_NM -- 施設_基本情報.階級区分
		, CDM_REGVISTYPE.VALUE1_KANJ AS REG_VIS_TYPE_NM -- 施設_基本情報.定訪先区分
		, CDM_IMPHOSTYPE.VALUE1_KANJ AS IMP_HOS_TYPE_NM -- 施設_基本情報.重点病院区分
		, CDM_HOINSTYPE.VALUE1_KANJ AS HO_INS_TYPE_NM -- 施設_基本情報.対象区分
		, KEIEITAI.KEIEITAI_KJ AS MANAGE_NM -- 施設_経営主体マスタ.経営主体
		, CDM_VACINSTYPE.VALUE1_KANJ AS VAC_INS_TYPE_NM -- 施設_基本情報.ワクチン対象区分
		, CDM_VACVISITTYPE.VALUE1_KANJ AS VAC_VISIT_TYPE_NM -- 施設_基本情報.ワクチン定訪先区分
		, CDM_ULTPHARMTYPE.VALUE1_KANJ AS ULT_PHARM_TYPE -- ULT_MDB施設マスタ.施設区分
		, ULT_KEIEITAI.KEIEITAI_KJ AS ULT_MANAGE_CD -- 施設_経営主体マスタ.経営主体
		, VHCO.PHARM_TYPE AS NEXT_PHARM_TYPE -- 施設_来期用_申請管理.施設区分
		, VHCO.INS_RANK AS NEXT_INS_RANK -- 施設_来期用_申請管理.階級区分
		, VHCO.REG_VIS_TYPE AS NEXT_REG_VIS_TYPE -- 施設_来期用_申請管理.定訪先区分
		, VHCO.IMP_HOS_TYPE AS NEXT_IMP_HOS_TYPE -- 施設_来期用_申請管理.重点病院区分
		, VHCO.HO_INS_TYPE AS NEXT_HO_INS_TYPE -- 施設_来期用_申請管理.対象区分
		, VHCO.MANAGE_CD AS NEXT_MANAGE_CD -- 施設_来期用_申請管理.経営主体コード
		, VHCO.VAC_INS_TYPE AS NEXT_VAC_INS_TYPE -- 施設_来期用_申請管理.ワクチン対象区分
		, VHCO.VAC_VISIT_TYPE AS NEXT_VAC_VISIT_TYPE -- 施設_来期用_申請管理.ワクチン定訪先区分
		, MST.BEDCNT_BASE
		, BEDCNT.BEDCNT04
		, BEDCNT.BEDCNT01
		, BEDCNT.BEDCNT05
		, BEDCNT.BEDCNT03
		, BEDCNT.BEDCNT07
		, BEDCNT.BEDCNT02
		, BEDCNT.BEDCNT06
		, MST.BEDS_TOT
		, MST.MED_BEDS_TOT
		, MDB.KYOKABYOSHOSU_SUM	AS ULT_BEDCNT_BASE	-- ULT_MDB施設マスタ.許可病床数合計
		, MDB.KYOKABYOSHOSU_KEKKAKU AS ULT_BEDCNT04	-- ULT_MDB施設マスタ.許可病床数結核
		, MDB.KYOKABYOSHOSU_IPPAN AS ULT_BEDCNT01	-- ULT_MDB施設マスタ.許可病床数一般病床
		, MDB.KYOKABYOSHOSU_KANSEN AS ULT_BEDCNT05	-- ULT_MDB施設マスタ.許可病床数感染症
		, MDB.KYOKABYOSHOSU_SEISHIN AS ULT_BEDCNT03	-- ULT_MDB施設マスタ.許可病床数精神
		, MDB.KYOKABYOSHOSU_RYOYO AS ULT_BEDCNT07	-- ULT_MDB施設マスタ.許可病床数療養病床
		, VHCO.BEDCNT04 AS NEXT_BEDCNT04
		, VHCO.BEDCNT01 AS NEXT_BEDCNT01
		, VHCO.BEDCNT05 AS NEXT_BEDCNT05
		, VHCO.BEDCNT03 AS NEXT_BEDCNT03
		, VHCO.BEDCNT07 AS NEXT_BEDCNT07
		, VHCO.BEDCNT02 AS NEXT_BEDCNT02
		, VHCO.BEDCNT06 AS NEXT_BEDCNT06
		, COLOR.PHARM_TYPE_FLG
		, COLOR.INS_RANK_FLG
		, COLOR.REG_VIS_TYPE_FLG
		, COLOR.IMP_HOS_TYPE_FLG
		, COLOR.MANAGE_CD_FLG
		, COLOR.VAC_INS_TYPE_FLG
		, COLOR.VAC_VISIT_TYPE_FLG
		, COLOR.BEDCNT_BASE_FLG
		, COLOR.BEDCNT04_FLG
		, COLOR.BEDCNT01_FLG
		, COLOR.BEDCNT05_FLG
		, COLOR.BEDCNT03_FLG
		, COLOR.BEDCNT07_FLG
		, COLOR.BEDCNT02_FLG
		, COLOR.BEDCNT06_FLG
		, COLOR.BEDS_TOT_FLG
		, COLOR.MED_BEDS_TOT_FLG
		FROM
		M_RDM_HCO_MST MST -- 施設_基本情報
		LEFT JOIN
		M_RDM_HCO_VAC VAC -- 施設_ワクチン情報
		ON 1=1
		AND VAC.INS_NO = MST.INS_NO
		LEFT JOIN
		( SELECT
		   INS_NO
		  , MAX(CASE SET_CD WHEN '001' THEN SET_VALUE ELSE null END) AS BEDCNT01
		  , MAX(CASE SET_CD WHEN '002' THEN SET_VALUE ELSE null END) AS BEDCNT02
		  , MAX(CASE SET_CD WHEN '003' THEN SET_VALUE ELSE null END) AS BEDCNT03
		  , MAX(CASE SET_CD WHEN '004' THEN SET_VALUE ELSE null END) AS BEDCNT04
		  , MAX(CASE SET_CD WHEN '005' THEN SET_VALUE ELSE null END) AS BEDCNT05
		  , MAX(CASE SET_CD WHEN '006' THEN SET_VALUE ELSE null END) AS BEDCNT06
		  , MAX(CASE SET_CD WHEN '007' THEN SET_VALUE ELSE null END) AS BEDCNT07
		FROM
		  M_RDM_HCO_BEDCNT
		WHERE
		  RELEV_TYPE = '008'
		AND RELEV_CD = '00'
		GROUP BY
		  INS_NO
		) BEDCNT
		ON 1=1
		AND BEDCNT.INS_NO = MST.INS_NO
		LEFT JOIN
		T_RDM_M_MDB_HCO_MST MDB -- ULT_MDB施設マスタ
		ON 1=1
		AND MDB.DCF_SHISETSU_CD = MST.ULT_INS_NO
		LEFT JOIN
		M_RDM_HCO_KEIEITAI_LNK_MST KEIEI -- 経営体紐付けマスタ
		ON 1=1
		AND KEIEI.KEIEITAI_CD = MDB.KEIEITAI_CD
		LEFT JOIN
		COLOR -- サブクエリ（カラー判定）
		ON 1=1
		AND COLOR.INS_NO = MST.INS_NO
		LEFT JOIN
		V_RDM_HCO_NXT_REQ_COL VHCO -- 施設_来期用_申請管理_集約ビュー
		ON 1=1
		AND VHCO.INS_NO = MST.INS_NO

		LEFT JOIN
		M_RDM_CODE_MST CDM_PHARMTYPE -- コード情報
		ON 1=1
		AND CDM_PHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_PHARMTYPE.DEL_FLG = '0'
		AND CDM_PHARMTYPE.VALUE1 = MST.PHARM_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_INSRANK -- コード情報
		ON 1=1
		AND CDM_INSRANK.CODE_NAME = 'INS_RANK'
		AND CDM_INSRANK.DEL_FLG = '0'
		AND CDM_INSRANK.VALUE1 = MST.INS_RANK
		LEFT JOIN
		M_RDM_CODE_MST CDM_REGVISTYPE -- コード情報
		ON 1=1
		AND CDM_REGVISTYPE.CODE_NAME = 'REG_VIS_TYPE'
		AND CDM_REGVISTYPE.DEL_FLG = '0'
		AND CDM_REGVISTYPE.VALUE1 = MST.REG_VIS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_IMPHOSTYPE -- コード情報
		ON 1=1
		AND CDM_IMPHOSTYPE.CODE_NAME = 'IMP_HOS_TYPE'
		AND CDM_IMPHOSTYPE.DEL_FLG = '0'
		AND CDM_IMPHOSTYPE.VALUE1 = MST.IMP_HOS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_HOINSTYPE -- コード情報
		ON 1=1
		AND CDM_HOINSTYPE.CODE_NAME = 'HO_INS_TYPE'
		AND CDM_HOINSTYPE.DEL_FLG = '0'
		AND CDM_HOINSTYPE.VALUE1 = MST.HO_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACINSTYPE -- コード情報
		ON 1=1
		AND CDM_VACINSTYPE.CODE_NAME = 'VAC_INS_TYPE'
		AND CDM_VACINSTYPE.DEL_FLG = '0'
		AND CDM_VACINSTYPE.VALUE1 = VAC.VAC_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACVISITTYPE -- コード情報
		ON 1=1
		AND CDM_VACVISITTYPE.CODE_NAME = 'VAC_VISIT_TYPE'
		AND CDM_VACVISITTYPE.DEL_FLG = '0'
		AND CDM_VACVISITTYPE.VALUE1 = VAC.VAC_VISIT_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_ULTPHARMTYPE -- コード情報
		ON 1=1
		AND CDM_ULTPHARMTYPE.CODE_NAME = 'ULT_PHARM_TYPE'
		AND CDM_ULTPHARMTYPE.DEL_FLG = '0'
		AND CDM_ULTPHARMTYPE.VALUE1 = MDB.SHISETSU_KBN
		LEFT JOIN
		M_RDM_HCO_KEIEITAI KEIEITAI -- 施設_経営主体マスタ
		ON 1=1
		AND KEIEITAI.SET_DT_CD = MST.MANAGE_CD
		LEFT JOIN
		M_RDM_HCO_KEIEITAI ULT_KEIEITAI -- 施設_経営主体マスタ
		ON 1=1
		AND ULT_KEIEITAI.SET_DT_CD = KEIEI.SET_DT_CD
		WHERE 1=1
      	AND MST.INS_NO = #{inInsNo}
    </select>
    <select id="selectNF101REQData" parameterType="jp.co.takeda.rdm.entity.join.SelectNF101MainDataEntity" resultMap="nF101MainDataResultMap">
		WITH COLOR AS (
		SELECT
		  INS_NO
		, CASE WHEN PHARM_TYPE IS NULL THEN '0' ELSE '1' END AS PHARM_TYPE_FLG
		, CASE WHEN INS_RANK IS NULL THEN '0' ELSE '1' END AS INS_RANK_FLG
		, CASE WHEN REG_VIS_TYPE IS NULL THEN '0' ELSE '1' END AS REG_VIS_TYPE_FLG
		, CASE WHEN IMP_HOS_TYPE IS NULL THEN '0' ELSE '1' END AS IMP_HOS_TYPE_FLG
		, CASE WHEN HO_INS_TYPE IS NULL THEN '0' ELSE '1' END AS HO_INS_TYPE_FLG
		, CASE WHEN MANAGE_CD IS NULL THEN '0' ELSE '1' END AS MANAGE_CD_FLG
		, CASE WHEN VAC_INS_TYPE IS NULL THEN '0' ELSE '1' END AS VAC_INS_TYPE_FLG
		, CASE WHEN VAC_VISIT_TYPE IS NULL THEN '0' ELSE '1' END AS VAC_VISIT_TYPE_FLG
		, CASE WHEN BEDCNT_BASE IS NULL THEN '0' ELSE '1' END AS BEDCNT_BASE_FLG
		, CASE WHEN BEDCNT04 IS NULL THEN '0' ELSE '1' END AS BEDCNT04_FLG
		, CASE WHEN BEDCNT01 IS NULL THEN '0' ELSE '1' END AS BEDCNT01_FLG
		, CASE WHEN BEDCNT05 IS NULL THEN '0' ELSE '1' END AS BEDCNT05_FLG
		, CASE WHEN BEDCNT03 IS NULL THEN '0' ELSE '1' END AS BEDCNT03_FLG
		, CASE WHEN BEDCNT07 IS NULL THEN '0' ELSE '1' END AS BEDCNT07_FLG
		, CASE WHEN BEDCNT02 IS NULL THEN '0' ELSE '1' END AS BEDCNT02_FLG
		, CASE WHEN BEDCNT06 IS NULL THEN '0' ELSE '1' END AS BEDCNT06_FLG
		, CASE WHEN BEDS_TOT IS NULL THEN '0' ELSE '1' END AS BEDS_TOT_FLG
		, CASE WHEN MED_BEDS_TOT IS NULL THEN '0' ELSE '1' END AS MED_BEDS_TOT_FLG
		FROM(
			SELECT
			  HCO.INS_NO
			, MAX(HCO.PHARM_TYPE) AS PHARM_TYPE
			, MAX(HCO.INS_RANK) AS INS_RANK
			, MAX(HCO.REG_VIS_TYPE) AS REG_VIS_TYPE
			, MAX(HCO.IMP_HOS_TYPE) AS IMP_HOS_TYPE
			, MAX(HCO.HO_INS_TYPE) AS HO_INS_TYPE
			, MAX(HCO.MANAGE_CD) AS MANAGE_CD
			, MAX(HCO.VAC_INS_TYPE) AS VAC_INS_TYPE
			, MAX(HCO.VAC_VISIT_TYPE) AS VAC_VISIT_TYPE
			, MAX(HCO.BEDCNT_BASE) AS BEDCNT_BASE
			, MAX(HCO.BEDCNT04) AS BEDCNT04
			, MAX(HCO.BEDCNT01) AS BEDCNT01
			, MAX(HCO.BEDCNT05) AS BEDCNT05
			, MAX(HCO.BEDCNT03) AS BEDCNT03
			, MAX(HCO.BEDCNT07) AS BEDCNT07
			, MAX(HCO.BEDCNT02) AS BEDCNT02
			, MAX(HCO.BEDCNT06) AS BEDCNT06
			, MAX(HCO.BEDS_TOT) AS BEDS_TOT
			, MAX(HCO.MED_BEDS_TOT) AS MED_BEDS_TOT
			FROM
			T_RDM_REQ_KNR KNR -- 申請管理
			LEFT JOIN
			T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
			ON 1=1
			AND KNR.REQ_ID = HCO.REQ_ID
			WHERE 1=1
			AND KNR.INS_NO = #{inInsNo}
			AND KNR.REQ_TYPE = '21'
			AND KNR.REQ_STS IN ('03', '13', '04', '14')
			GROUP BY
			HCO.INS_NO
			)
		)

		SELECT
		  KNR.REQ_ID  -- 申請管理.申請ID
		, KNR.REQ_CHL -- 申請管理.申請チャネル
		, CDM.VALUE1_KANJ AS REQ_STS_NM  -- 申請管理.申請ステータス
		, KNR.REQ_SHZ  -- 申請管理.申請者所属
		, KNR.REQ_JGI_NAME  -- 申請管理.申請者氏名
		, KNR.REQ_YMDHMS  -- 申請管理.申請日時
		, KNR.SHN_SHZ  -- 申請管理.審査者所属
		, KNR.SHN_SHA_ID  -- 申請管理.審査者氏名
		, KNR.SHN_YMDHMS  -- 申請管理.審査日時
		, KNR.APR_SHA_ID  -- 申請管理.承認者氏名
		, KNR.APR_YMDHMS  -- 申請管理.承認日時
		, KNR.REQ_JGI_NO  -- 申請管理.申請者従業員番号
		, KNR.REQ_BR_CODE  -- 申請管理.申請者所属リージョン
		, KNR.REQ_DIST_CODE  -- 申請管理.申請者所属エリア
		, KNR.REQ_STS  -- 申請管理.申請ステータス
		, KNR.SHN_JGI_NO  -- 申請管理.審査者従業員番号
		, KNR.APR_JGI_NO  -- 申請管理.承認者従業員番号
		, TO_CHAR(KNR.UPD_SHA_YMD,'YYYYMMDDhh24miss') AS UPD_SHA_YMD  -- 申請管理.更新日
		, HCO.INS_NO -- 施設_申請管理.施設固定コード
		, MST.INS_SBT AS INS_TYPE -- 施設_基本情報.施設種別
		, MST.INS_ABBR_NAME -- 施設_基本情報.施設略式漢字名
		, MST.ULT_INS_NO -- 施設_申請管理.ULT施設コード
		, MDB.SHISETSU_NM_RYAKU -- ULT_MDB施設マスタ.施設名略名
		, MST.PHARM_TYPE
		, MST.INS_RANK
		, MST.REG_VIS_TYPE
		, MST.IMP_HOS_TYPE
		, MST.HO_INS_TYPE
		, MST.MANAGE_CD
		, VAC.VAC_INS_TYPE
		, VAC.VAC_VISIT_TYPE
		, CDM_PHARMTYPE.VALUE1_KANJ AS PHARM_TYPE_NM -- 施設_基本情報.施設区分
		, CDM_INSRANK.VALUE1_KANJ AS INS_RANK_NM -- 施設_基本情報.階級区分
		, CDM_REGVISTYPE.VALUE1_KANJ AS REG_VIS_TYPE_NM -- 施設_基本情報.定訪先区分
		, CDM_IMPHOSTYPE.VALUE1_KANJ AS IMP_HOS_TYPE_NM -- 施設_基本情報.重点病院区分
		, CDM_HOINSTYPE.VALUE1_KANJ AS HO_INS_TYPE_NM -- 施設_基本情報.対象区分
		, KEIEITAI.KEIEITAI_KJ AS MANAGE_NM -- 施設_経営主体マスタ.経営主体
		, CDM_VACINSTYPE.VALUE1_KANJ AS VAC_INS_TYPE_NM -- 施設_基本情報.ワクチン対象区分
		, CDM_VACVISITTYPE.VALUE1_KANJ AS VAC_VISIT_TYPE_NM -- 施設_基本情報.ワクチン定訪先区分
		, CDM_ULTPHARMTYPE.VALUE1_KANJ AS ULT_PHARM_TYPE -- ULT_MDB施設マスタ.施設区分
		, ULT_KEIEITAI.KEIEITAI_KJ AS ULT_MANAGE_CD -- 施設_経営主体マスタ.経営主体
		, HCO.PHARM_TYPE AS NEXT_PHARM_TYPE -- 施設_来期用_申請管理.施設区分
		, HCO.INS_RANK AS NEXT_INS_RANK -- 施設_来期用_申請管理.階級区分
		, HCO.REG_VIS_TYPE AS NEXT_REG_VIS_TYPE -- 施設_来期用_申請管理.定訪先区分
		, HCO.IMP_HOS_TYPE AS NEXT_IMP_HOS_TYPE -- 施設_来期用_申請管理.重点病院区分
		, HCO.HO_INS_TYPE AS NEXT_HO_INS_TYPE -- 施設_来期用_申請管理.対象区分
		, HCO.MANAGE_CD AS NEXT_MANAGE_CD -- 施設_来期用_申請管理.経営主体コード
		, HCO.VAC_INS_TYPE AS NEXT_VAC_INS_TYPE -- 施設_来期用_申請管理.ワクチン対象区分
		, HCO.VAC_VISIT_TYPE AS NEXT_VAC_VISIT_TYPE -- 施設_来期用_申請管理.ワクチン定訪先区分
		, MST.BEDCNT_BASE
		, BEDCNT.BEDCNT04
		, BEDCNT.BEDCNT01
		, BEDCNT.BEDCNT05
		, BEDCNT.BEDCNT03
		, BEDCNT.BEDCNT07
		, BEDCNT.BEDCNT02
		, BEDCNT.BEDCNT06
		, MST.BEDS_TOT
		, MST.MED_BEDS_TOT
		, MDB.KYOKABYOSHOSU_SUM	AS ULT_BEDCNT_BASE	-- ULT_MDB施設マスタ.許可病床数合計
		, MDB.KYOKABYOSHOSU_KEKKAKU AS ULT_BEDCNT04	-- ULT_MDB施設マスタ.許可病床数結核
		, MDB.KYOKABYOSHOSU_IPPAN AS ULT_BEDCNT01	-- ULT_MDB施設マスタ.許可病床数一般病床
		, MDB.KYOKABYOSHOSU_KANSEN AS ULT_BEDCNT05	-- ULT_MDB施設マスタ.許可病床数感染症
		, MDB.KYOKABYOSHOSU_SEISHIN AS ULT_BEDCNT03	-- ULT_MDB施設マスタ.許可病床数精神
		, MDB.KYOKABYOSHOSU_RYOYO AS ULT_BEDCNT07	-- ULT_MDB施設マスタ.許可病床数療養病床
		, HCO.BEDCNT_BASE AS NEXT_BEDCNT_BASE
		, HCO.BEDCNT04 AS NEXT_BEDCNT04
		, HCO.BEDCNT01 AS NEXT_BEDCNT01
		, HCO.BEDCNT05 AS NEXT_BEDCNT05
		, HCO.BEDCNT03 AS NEXT_BEDCNT03
		, HCO.BEDCNT07 AS NEXT_BEDCNT07
		, HCO.BEDCNT02 AS NEXT_BEDCNT02
		, HCO.BEDCNT06 AS NEXT_BEDCNT06
		, HCO.BEDS_TOT AS NEXT_BEDS_TOT
		, HCO.MED_BEDS_TOT AS NEXT_MED_BEDS_TOT
		, KNR.REQ_COMMENT  -- 申請管理.申請コメント
		, KNR.APR_MEMO  -- 申請管理.承認者メモ
		, KNR.SHN_FLG -- 申請管理.審査済みフラグ
		, COLOR.PHARM_TYPE_FLG
		, COLOR.INS_RANK_FLG
		, COLOR.REG_VIS_TYPE_FLG
		, COLOR.IMP_HOS_TYPE_FLG
		, COLOR.MANAGE_CD_FLG
		, COLOR.VAC_INS_TYPE_FLG
		, COLOR.VAC_VISIT_TYPE_FLG
		, COLOR.BEDCNT_BASE_FLG
		, COLOR.BEDCNT04_FLG
		, COLOR.BEDCNT01_FLG
		, COLOR.BEDCNT05_FLG
		, COLOR.BEDCNT03_FLG
		, COLOR.BEDCNT07_FLG
		, COLOR.BEDCNT02_FLG
		, COLOR.BEDCNT06_FLG
		, COLOR.BEDS_TOT_FLG
		, COLOR.MED_BEDS_TOT_FLG
		FROM
		T_RDM_REQ_KNR KNR ---申請管理
		LEFT JOIN
		T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
		ON 1=1
		AND KNR.REQ_ID = HCO.REQ_ID
		LEFT JOIN
		M_RDM_HCO_MST MST -- 施設_基本情報
		ON 1=1
		AND MST.INS_NO = HCO.INS_NO
		LEFT JOIN
		M_RDM_HCO_VAC VAC -- 施設_ワクチン情報
		ON 1=1
		AND VAC.INS_NO = MST.INS_NO
		LEFT JOIN
		( SELECT
		   INS_NO
		  , MAX(CASE SET_CD WHEN '001' THEN SET_VALUE ELSE null END) AS BEDCNT01
		  , MAX(CASE SET_CD WHEN '002' THEN SET_VALUE ELSE null END) AS BEDCNT02
		  , MAX(CASE SET_CD WHEN '003' THEN SET_VALUE ELSE null END) AS BEDCNT03
		  , MAX(CASE SET_CD WHEN '004' THEN SET_VALUE ELSE null END) AS BEDCNT04
		  , MAX(CASE SET_CD WHEN '005' THEN SET_VALUE ELSE null END) AS BEDCNT05
		  , MAX(CASE SET_CD WHEN '006' THEN SET_VALUE ELSE null END) AS BEDCNT06
		  , MAX(CASE SET_CD WHEN '007' THEN SET_VALUE ELSE null END) AS BEDCNT07
		FROM
		  M_RDM_HCO_BEDCNT
		WHERE
		  RELEV_TYPE = '008'
		AND RELEV_CD = '00'
		GROUP BY
		  INS_NO
		) BEDCNT
		ON 1=1
		AND BEDCNT.INS_NO = MST.INS_NO
		LEFT JOIN
		T_RDM_M_MDB_HCO_MST MDB -- ULT_MDB施設マスタ
		ON 1=1
		AND MDB.DCF_SHISETSU_CD = MST.ULT_INS_NO
		LEFT JOIN
		M_RDM_HCO_KEIEITAI_LNK_MST KEIEI -- 経営体紐付けマスタ
		ON 1=1
		AND KEIEI.KEIEITAI_CD = MDB.KEIEITAI_CD
		LEFT JOIN
		COLOR -- サブクエリ（カラー判定）
		ON 1=1
		AND COLOR.INS_NO = HCO.INS_NO
		LEFT JOIN
		V_RDM_HCO_NXT_REQ_COL VHCO -- 施設_来期用_申請管理_集約ビュー
		ON 1=1
		AND VHCO.INS_NO = HCO.INS_NO
		LEFT JOIN
		M_RDM_CODE_MST CDM -- コード情報
		ON 1=1
		AND CDM.CODE_NAME = 'REQ_STS'
		AND CDM.DEL_FLG = '0'
		AND CDM.VALUE1 = KNR.REQ_STS
		LEFT JOIN
		M_RDM_CODE_MST CDM_PHARMTYPE -- コード情報
		ON 1=1
		AND CDM_PHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_PHARMTYPE.DEL_FLG = '0'
		AND CDM_PHARMTYPE.VALUE1 = MST.PHARM_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_INSRANK -- コード情報
		ON 1=1
		AND CDM_INSRANK.CODE_NAME = 'INS_RANK'
		AND CDM_INSRANK.DEL_FLG = '0'
		AND CDM_INSRANK.VALUE1 = MST.INS_RANK
		LEFT JOIN
		M_RDM_CODE_MST CDM_REGVISTYPE -- コード情報
		ON 1=1
		AND CDM_REGVISTYPE.CODE_NAME = 'REG_VIS_TYPE'
		AND CDM_REGVISTYPE.DEL_FLG = '0'
		AND CDM_REGVISTYPE.VALUE1 = MST.REG_VIS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_IMPHOSTYPE -- コード情報
		ON 1=1
		AND CDM_IMPHOSTYPE.CODE_NAME = 'IMP_HOS_TYPE'
		AND CDM_IMPHOSTYPE.DEL_FLG = '0'
		AND CDM_IMPHOSTYPE.VALUE1 = MST.IMP_HOS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_HOINSTYPE -- コード情報
		ON 1=1
		AND CDM_HOINSTYPE.CODE_NAME = 'HO_INS_TYPE'
		AND CDM_HOINSTYPE.DEL_FLG = '0'
		AND CDM_HOINSTYPE.VALUE1 = MST.HO_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACINSTYPE -- コード情報
		ON 1=1
		AND CDM_VACINSTYPE.CODE_NAME = 'VAC_INS_TYPE'
		AND CDM_VACINSTYPE.DEL_FLG = '0'
		AND CDM_VACINSTYPE.VALUE1 = VAC.VAC_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACVISITTYPE -- コード情報
		ON 1=1
		AND CDM_VACVISITTYPE.CODE_NAME = 'VAC_VISIT_TYPE'
		AND CDM_VACVISITTYPE.DEL_FLG = '0'
		AND CDM_VACVISITTYPE.VALUE1 = VAC.VAC_VISIT_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_ULTPHARMTYPE -- コード情報
		ON 1=1
		AND CDM_ULTPHARMTYPE.CODE_NAME = 'ULT_PHARM_TYPE'
		AND CDM_ULTPHARMTYPE.DEL_FLG = '0'
		AND CDM_ULTPHARMTYPE.VALUE1 = MDB.SHISETSU_KBN
		LEFT JOIN
		M_RDM_HCO_KEIEITAI KEIEITAI -- 施設_経営主体マスタ
		ON 1=1
		AND KEIEITAI.SET_DT_CD = MST.MANAGE_CD
		LEFT JOIN
		M_RDM_HCO_KEIEITAI ULT_KEIEITAI -- 施設_経営主体マスタ
		ON 1=1
		AND ULT_KEIEITAI.SET_DT_CD = KEIEI.SET_DT_CD
		WHERE 1=1
        AND KNR.REQ_ID = #{inReqId}
    </select>
	<select id="selectNF102Data" parameterType="jp.co.takeda.rdm.entity.join.SelectNF102MainDataListEntity" resultMap="nF102MainDataResultMap">
		WITH MAIN AS(
		SELECT
		  KNR.REQ_ID
		, KNR.REQ_YMDHMS
		, KNR.APR_YMDHMS
		, KNR.REQ_STS
		, KNR.REQ_JGI_NO
		, KNR.REQ_JGI_NAME
		, KNR.REQ_SHZ
		, KNR.REQ_COMMENT
		, NXT.PHARM_TYPE
		, NXT.INS_RANK
		, NXT.REG_VIS_TYPE
		, NXT.IMP_HOS_TYPE
		, NXT.HO_INS_TYPE
		, NXT.MANAGE_CD
		, NXT.VAC_INS_TYPE
		, NXT.VAC_VISIT_TYPE
		, NXT.BEDCNT_BASE
		, NXT.BEDCNT04
		, NXT.BEDCNT01
		, NXT.BEDCNT05
		, NXT.BEDCNT03
		, NXT.BEDCNT07
		, NXT.BEDCNT02
		, NXT.BEDCNT06
		, NXT.BEDS_TOT
		, NXT.MED_BEDS_TOT
		, 1 AS SORT
		FROM
		T_RDM_HCO_NXT_REQ NXT -- 施設_来期用_申請管理
		INNER JOIN
		T_RDM_REQ_KNR KNR -- 申請管理
		ON  KNR.REQ_ID = NXT.REQ_ID
		AND KNR.REQ_TYPE = '21'
		AND KNR.REQ_STS IN ('03', '13', '04', '14')
		WHERE
		NXT.INS_NO = #{inInsNo}
		AND KNR.REQ_YMDHMS <![CDATA[>=]]> #{inCurrTermFirstDay}
		AND KNR.REQ_YMDHMS <![CDATA[<]]> #{inNextTermFirstDay}

		UNION

		SELECT
		  null AS REQ_ID
		, null AS REQ_YMDHMS
		, null AS APR_YMDHMS
		, null AS REQ_STS
		, null AS REQ_JGI_NO
		, null AS REQ_JGI_NAME
		, null AS REQ_SHZ
		, null AS REQ_COMMENT
		, MST.PHARM_TYPE
		, MST.INS_RANK
		, MST.REG_VIS_TYPE
		, MST.IMP_HOS_TYPE
		, MST.HO_INS_TYPE
		, MST.MANAGE_CD
		, VAC.VAC_INS_TYPE
		, VAC.VAC_VISIT_TYPE
		, TO_CHAR(MST.BEDCNT_BASE) AS BEDCNT_BASE
		, CNT.BEDCNT04
		, CNT.BEDCNT01
		, CNT.BEDCNT05
		, CNT.BEDCNT03
		, CNT.BEDCNT07
		, CNT.BEDCNT02
		, CNT.BEDCNT06
		, TO_CHAR(MST.BEDS_TOT) AS BEDS_TOT
		, TO_CHAR(MST.MED_BEDS_TOT) AS MED_BEDS_TOT
		, 0 AS SORT
		FROM
		M_RDM_HCO_MST MST -- 施設_基本情報
		LEFT JOIN
		M_RDM_HCO_VAC VAC -- 施設_ワクチン情報
		ON MST.INS_NO = VAC.INS_NO
		LEFT JOIN
		( SELECT
		   INS_NO
		  , MAX(CASE SET_CD WHEN '001' THEN SET_VALUE ELSE null END) AS BEDCNT01
		  , MAX(CASE SET_CD WHEN '002' THEN SET_VALUE ELSE null END) AS BEDCNT02
		  , MAX(CASE SET_CD WHEN '003' THEN SET_VALUE ELSE null END) AS BEDCNT03
		  , MAX(CASE SET_CD WHEN '004' THEN SET_VALUE ELSE null END) AS BEDCNT04
		  , MAX(CASE SET_CD WHEN '005' THEN SET_VALUE ELSE null END) AS BEDCNT05
		  , MAX(CASE SET_CD WHEN '006' THEN SET_VALUE ELSE null END) AS BEDCNT06
		  , MAX(CASE SET_CD WHEN '007' THEN SET_VALUE ELSE null END) AS BEDCNT07
		FROM
		  M_RDM_HCO_BEDCNT
		WHERE
		  RELEV_TYPE = '008'
		AND RELEV_CD = '00'
		GROUP BY
		  INS_NO
		) CNT -- 施設_病床数情報
		ON MST.INS_NO = CNT.INS_NO
		WHERE MST.INS_NO = #{inInsNo}
		)

		SELECT
		  MAIN.REQ_ID
		, MAIN.REQ_YMDHMS
		, CDM.VALUE1_KANJ AS REQ_STS_NM
		, MAIN.REQ_JGI_NO
		, MAIN.REQ_JGI_NAME
		, MAIN.REQ_SHZ
		, MAIN.REQ_COMMENT
		, CDM_PHARMTYPE.VALUE1_KANJ AS PHARM_TYPE
		, CDM_INSRANK.VALUE1_KANJ AS INS_RANK
		, CDM_REGVISTYPE.VALUE1_KANJ AS REG_VIS_TYPE
		, CDM_IMPHOSTYPE.VALUE1_KANJ AS IMP_HOS_TYPE
		, CDM_HOINSTYPE.VALUE1_KANJ AS HO_INS_TYPE
		, KEIEITAI.KEIEITAI_KJ AS MANAGE_NM
		, CDM_VACINSTYPE.VALUE1_KANJ AS VAC_INS_TYPE
		, CDM_VACVISITTYPE.VALUE1_KANJ AS VAC_VISIT_TYPE
		, MAIN.BEDCNT_BASE
		, MAIN.BEDCNT04
		, MAIN.BEDCNT01
		, MAIN.BEDCNT05
		, MAIN.BEDCNT03
		, MAIN.BEDCNT07
		, MAIN.BEDCNT02
		, MAIN.BEDCNT06
		, MAIN.BEDS_TOT
		, MAIN.MED_BEDS_TOT
		FROM
		MAIN -- サブクエリ（一覧データ）
		LEFT JOIN
		M_RDM_CODE_MST CDM -- コード情報
		ON 1=1
		AND CDM.CODE_NAME = 'REQ_STS'
		AND CDM.DEL_FLG = '0'
		AND CDM.VALUE1 = MAIN.REQ_STS
		LEFT JOIN
		M_RDM_CODE_MST CDM_PHARMTYPE -- コード情報
		ON 1=1
		AND CDM_PHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_PHARMTYPE.DEL_FLG = '0'
		AND CDM_PHARMTYPE.VALUE1 = MAIN.PHARM_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_INSRANK -- コード情報
		ON 1=1
		AND CDM_INSRANK.CODE_NAME = 'INS_RANK'
		AND CDM_INSRANK.DEL_FLG = '0'
		AND CDM_INSRANK.VALUE1 = MAIN.INS_RANK
		LEFT JOIN
		M_RDM_CODE_MST CDM_REGVISTYPE -- コード情報
		ON 1=1
		AND CDM_REGVISTYPE.CODE_NAME = 'REG_VIS_TYPE'
		AND CDM_REGVISTYPE.DEL_FLG = '0'
		AND CDM_REGVISTYPE.VALUE1 = MAIN.REG_VIS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_IMPHOSTYPE -- コード情報
		ON 1=1
		AND CDM_IMPHOSTYPE.CODE_NAME = 'IMP_HOS_TYPE'
		AND CDM_IMPHOSTYPE.DEL_FLG = '0'
		AND CDM_IMPHOSTYPE.VALUE1 = MAIN.IMP_HOS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_HOINSTYPE -- コード情報
		ON 1=1
		AND CDM_HOINSTYPE.CODE_NAME = 'HO_INS_TYPE'
		AND CDM_HOINSTYPE.DEL_FLG = '0'
		AND CDM_HOINSTYPE.VALUE1 = MAIN.HO_INS_TYPE
		LEFT JOIN
		M_RDM_HCO_KEIEITAI KEIEITAI -- 施設_経営主体マスタ
		ON 1=1
		AND KEIEITAI.SET_DT_CD = MAIN.MANAGE_CD
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACINSTYPE -- コード情報
		ON 1=1
		AND CDM_VACINSTYPE.CODE_NAME = 'VAC_INS_TYPE'
		AND CDM_VACINSTYPE.DEL_FLG = '0'
		AND CDM_VACINSTYPE.VALUE1 = MAIN.VAC_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACVISITTYPE -- コード情報
		ON 1=1
		AND CDM_VACVISITTYPE.CODE_NAME = 'VAC_VISIT_TYPE'
		AND CDM_VACVISITTYPE.DEL_FLG = '0'
		AND CDM_VACVISITTYPE.VALUE1 = MAIN.VAC_VISIT_TYPE
		<if test="inSortId == 0">ORDER BY SORT, MAIN.APR_YMDHMS, MAIN.REQ_YMDHMS ASC NULLS FIRST, REQ_ID DESC</if>
        <if test="inSortId == 1">ORDER BY SORT, MAIN.APR_YMDHMS, MAIN.REQ_YMDHMS DESC NULLS LAST, REQ_ID DESC</if>
	</select>
	<select id="selectNF401DataList" parameterType="jp.co.takeda.rdm.entity.join.SelectNF401MainDataEntity" resultMap="nF401MainDataResultMap">
		WITH REQ_COM AS ( -- ■サブクエリ（最新の申請コメント）
			SELECT
			  COM.INS_NO
			, COM.REQ_COMMENT
			FROM(
				SELECT
				  HCO.INS_NO
				, KNR.REQ_COMMENT
				, ROW_NUMBER() OVER(PARTITION BY HCO.INS_NO ORDER BY KNR.REQ_YMDHMS DESC, KNR.REQ_ID DESC) AS SORT
				FROM
				T_RDM_REQ_KNR KNR -- 申請管理
				LEFT JOIN
				T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
				ON HCO.REQ_ID = KNR.REQ_ID
				WHERE KNR.REQ_TYPE = '21'
				AND KNR.REQ_YMDHMS IS NOT NULL
				) COM
			WHERE
			COM.SORT = 1
		),
		APR_COM AS ( -- ■サブクエリ（最新の承認・却下コメント）
			SELECT
			  COM.INS_NO
			, COM.APR_COMMENT
			FROM(
				SELECT
				  HCO.INS_NO
				, KNR.APR_COMMENT
				, ROW_NUMBER() OVER(PARTITION BY HCO.INS_NO ORDER BY KNR.APR_YMDHMS DESC, KNR.REQ_ID DESC) AS SORT
				FROM
				T_RDM_REQ_KNR KNR -- 申請管理
				LEFT JOIN
				T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
				ON HCO.REQ_ID = KNR.REQ_ID
				WHERE KNR.REQ_TYPE = '21'
				AND KNR.REQ_YMDHMS IS NOT NULL
				) COM
			WHERE
			COM.SORT = 1
		),
		APR_WAIT AS ( -- ■サブクエリ（承認待ち件数）
			SELECT
			  HCO.INS_NO
			, COUNT(KNR.REQ_ID) AS APR_WAIT_CNT
			FROM
			T_RDM_REQ_KNR KNR -- 申請管理
			LEFT JOIN
			T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
			ON HCO.REQ_ID = KNR.REQ_ID
			WHERE KNR.REQ_TYPE = '21'
			AND KNR.REQ_STS IN ('03', '13')
			GROUP BY
			HCO.INS_NO
		),
		NO_SHN AS ( -- ■サブクエリ（未審査申請数）
			SELECT
			  HCO.INS_NO
			, COUNT(KNR.REQ_ID) AS NO_SHN_CNT
			FROM
			T_RDM_REQ_KNR KNR -- 申請管理
			LEFT JOIN
			T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
			ON HCO.REQ_ID = KNR.REQ_ID
			WHERE KNR.REQ_TYPE = '21'
			AND KNR.REQ_STS IN ('03', '13')
			AND KNR.SHN_FLG = '0'
			GROUP BY
			HCO.INS_NO
		)

		SELECT DISTINCT
		  APR_WAIT.APR_WAIT_CNT
		, HCO.INS_NO
		, MST.INS_ABBR_NAME
		, CDM_PHARMTYPE.VALUE1_KANJ AS PHARM_TYPE
		, CDM_INSRANK.VALUE1_KANJ AS INS_RANK
		, CDM_REGVISTYPE.VALUE1_KANJ AS REG_VIS_TYPE
		, CDM_IMPHOSTYPE.VALUE1_KANJ AS IMP_HOS_TYPE
		, CDM_HOINSTYPE.VALUE1_KANJ AS HO_INS_TYPE
		, HCOKEIEI.KEIEITAI_KJ AS MANAGE_NM
		, CDM_VACINSTYPE.VALUE1_KANJ AS VAC_INS_TYPE
		, CDM_VACVISITTYPE.VALUE1_KANJ AS VAC_VISIT_TYPE
		, BEDCNT.BEDCNT_BASE
		, BEDCNT.BEDCNT04
		, BEDCNT.BEDCNT01
		, BEDCNT.BEDCNT05
		, BEDCNT.BEDCNT03
		, BEDCNT.BEDCNT07
		, BEDCNT.BEDCNT02
		, BEDCNT.BEDCNT06
		, BEDCNT.BEDS_TOT
		, BEDCNT.MED_BEDS_TOT
		, MST.ULT_INS_NO
		, MDB.SHISETSU_NM_RYAKU
		, CDM_UPHARMTYPE.VALUE1_KANJ AS SHISETSU_KBN
		, ULTKEIEI.KEIEITAI_KJ AS KEIEITAI
		, MDB.KYOKABYOSHOSU_SUM AS ULT_BEDCNT_BASE
		, MDB.KYOKABYOSHOSU_KEKKAKU AS ULT_BEDCNT04
		, MDB.KYOKABYOSHOSU_IPPAN AS ULT_BEDCNT01
		, MDB.KYOKABYOSHOSU_KANSEN AS ULT_BEDCNT05
		, MDB.KYOKABYOSHOSU_SEISHIN AS ULT_BEDCNT03
		, MDB.KYOKABYOSHOSU_RYOYO AS ULT_BEDCNT07
		, CASE COL.PHARM_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_PHARMTYPE.VALUE1_KANJ END AS NEXT_PHARM_TYPE
		, CASE COL.INS_RANK WHEN 'Z' THEN ' ' ELSE CDM_NXT_INSRANK.VALUE1_KANJ END AS NEXT_INS_RANK
		, CASE COL.PHARM_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_REGVISTYPE.VALUE1_KANJ END AS NEXT_REG_VIS_TYPE
		, CASE COL.IMP_HOS_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_IMPHOSTYPE.VALUE1_KANJ END AS NEXT_IMP_HOS_TYPE
		, CASE COL.HO_INS_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_HOINSTYPE.VALUE1_KANJ END AS NEXT_HO_INS_TYPE
		, CASE COL.MANAGE_CD WHEN 'Z' THEN ' ' ELSE NXTKEIEI.KEIEITAI_KJ END AS NEXT_MANAGE_NM
		, CASE COL.VAC_INS_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_VACINSTYPE.VALUE1_KANJ END AS NEXT_VAC_INS_TYPE
		, CASE COL.VAC_VISIT_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_VACVISITTYPE.VALUE1_KANJ END AS NEXT_VAC_VISIT_TYPE
		, COL.BEDCNT_BASE AS NEXT_BEDCNT_BASE
		, COL.BEDCNT04 AS NEXT_BEDCNT04
		, COL.BEDCNT01 AS NEXT_BEDCNT01
		, COL.BEDCNT05 AS NEXT_BEDCNT05
		, COL.BEDCNT03 AS NEXT_BEDCNT03
		, COL.BEDCNT07 AS NEXT_BEDCNT07
		, COL.BEDCNT02 AS NEXT_BEDCNT02
		, COL.BEDCNT06 AS NEXT_BEDCNT06
		, COL.BEDS_TOT AS NEXT_BEDS_TOT
		, COL.MED_BEDS_TOT AS NEXT_MED_BEDS_TOT
		, NO_SHN.NO_SHN_CNT
		, REQ_COM.REQ_COMMENT
		, APR_COM.APR_COMMENT
		FROM
		T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
		LEFT JOIN
		M_RDM_HCO_MST MST -- 施設_基本情報
		ON HCO.INS_NO = MST.INS_NO
		LEFT JOIN
		M_RDM_HCO_VAC VAC -- 施設_ワクチン情報
		ON  VAC.INS_NO = MST.INS_NO
		LEFT JOIN
		V_RDM_HCO_BEDCNT BEDCNT -- 施設_当期病床数情報ビュー
		ON BEDCNT.INS_NO = MST.INS_NO
		LEFT JOIN
		T_RDM_M_MDB_HCO_MST MDB -- ULT_MDB施設マスタ
		ON MDB.DCF_SHISETSU_CD = MST.ULT_INS_NO
		LEFT JOIN
		M_RDM_HCO_KEIEITAI_LNK_MST KEIEI -- 経営体紐付けマスタ
		ON KEIEI.KEIEITAI_CD = MDB.KEIEITAI_CD
		LEFT JOIN
		M_RDM_HCO_KEIEITAI ULTKEIEI -- 施設_経営主体マスタ
		ON ULTKEIEI.SET_DT_CD = KEIEI.SET_DT_CD
		LEFT JOIN
		V_RDM_HCO_NXT_REQ_COL COL -- 施設_来期用_申請管理_集約ビュー
		ON COL.INS_NO = HCO.INS_NO
		LEFT JOIN
		REQ_COM -- サブクエリ（最新の申請コメント）
		ON REQ_COM.INS_NO = HCO.INS_NO
		LEFT JOIN
		APR_WAIT -- サブクエリ（承認待ち件数）
		ON APR_WAIT.INS_NO = HCO.INS_NO
		LEFT JOIN
		NO_SHN -- サブクエリ（未審査申請数）
		ON NO_SHN.INS_NO = HCO.INS_NO
		LEFT JOIN
		APR_COM -- サブクエリ（最新の承認・却下コメント）
		ON APR_COM.INS_NO = HCO.INS_NO
		LEFT JOIN
		T_RDM_REQ_KNR KNR -- 申請管理
		ON KNR.REQ_ID = HCO.REQ_ID
		LEFT JOIN
		M_RDM_JGI_SOS_MST JGI -- RDM用組織従業員情報
		ON JGI.JGI_NO = KNR.REQ_JGI_NO
		LEFT JOIN
		M_RDM_CODE_MST CDM_PHARMTYPE -- コード情報
		ON 1=1
		AND CDM_PHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_PHARMTYPE.DEL_FLG = '0'
		AND CDM_PHARMTYPE.VALUE1 = MST.PHARM_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_INSRANK -- コード情報
		ON 1=1
		AND CDM_INSRANK.CODE_NAME = 'INS_RANK'
		AND CDM_INSRANK.DEL_FLG = '0'
		AND CDM_INSRANK.VALUE1 = MST.INS_RANK
		LEFT JOIN
		M_RDM_CODE_MST CDM_REGVISTYPE -- コード情報
		ON 1=1
		AND CDM_REGVISTYPE.CODE_NAME = 'REG_VIS_TYPE'
		AND CDM_REGVISTYPE.DEL_FLG = '0'
		AND CDM_REGVISTYPE.VALUE1 = MST.REG_VIS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_IMPHOSTYPE -- コード情報
		ON 1=1
		AND CDM_IMPHOSTYPE.CODE_NAME = 'IMP_HOS_TYPE'
		AND CDM_IMPHOSTYPE.DEL_FLG = '0'
		AND CDM_IMPHOSTYPE.VALUE1 = MST.IMP_HOS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_HOINSTYPE -- コード情報
		ON 1=1
		AND CDM_HOINSTYPE.CODE_NAME = 'HO_INS_TYPE'
		AND CDM_HOINSTYPE.DEL_FLG = '0'
		AND CDM_HOINSTYPE.VALUE1 = MST.HO_INS_TYPE
		LEFT JOIN
		M_RDM_HCO_KEIEITAI NXTKEIEI -- 施設_経営主体マスタ
		ON NXTKEIEI.SET_DT_CD = COL.MANAGE_CD
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACINSTYPE -- コード情報
		ON 1=1
		AND CDM_VACINSTYPE.CODE_NAME = 'VAC_INS_TYPE'
		AND CDM_VACINSTYPE.DEL_FLG = '0'
		AND CDM_VACINSTYPE.VALUE1 = VAC.VAC_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACVISITTYPE -- コード情報
		ON 1=1
		AND CDM_VACVISITTYPE.CODE_NAME = 'VAC_VISIT_TYPE'
		AND CDM_VACVISITTYPE.DEL_FLG = '0'
		AND CDM_VACVISITTYPE.VALUE1 = VAC.VAC_VISIT_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_UPHARMTYPE -- コード情報
		ON 1=1
		AND CDM_UPHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_UPHARMTYPE.DEL_FLG = '0'
		AND CDM_UPHARMTYPE.VALUE1 = MDB.SHISETSU_KBN
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_PHARMTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_PHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_NXT_PHARMTYPE.DEL_FLG = '0'
		AND CDM_NXT_PHARMTYPE.VALUE1 = COL.PHARM_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_INSRANK -- コード情報
		ON 1=1
		AND CDM_NXT_INSRANK.CODE_NAME = 'INS_RANK'
		AND CDM_NXT_INSRANK.DEL_FLG = '0'
		AND CDM_NXT_INSRANK.VALUE1 = COL.INS_RANK
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_REGVISTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_REGVISTYPE.CODE_NAME = 'REG_VIS_TYPE'
		AND CDM_NXT_REGVISTYPE.DEL_FLG = '0'
		AND CDM_NXT_REGVISTYPE.VALUE1 = COL.REG_VIS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_IMPHOSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_IMPHOSTYPE.CODE_NAME = 'IMP_HOS_TYPE'
		AND CDM_NXT_IMPHOSTYPE.DEL_FLG = '0'
		AND CDM_NXT_IMPHOSTYPE.VALUE1 = COL.IMP_HOS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_HOINSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_HOINSTYPE.CODE_NAME = 'HO_INS_TYPE'
		AND CDM_NXT_HOINSTYPE.DEL_FLG = '0'
		AND CDM_NXT_HOINSTYPE.VALUE1 = COL.HO_INS_TYPE
		LEFT JOIN
		M_RDM_HCO_KEIEITAI HCOKEIEI -- 施設_経営主体マスタ
		ON HCOKEIEI.SET_DT_CD = MST.MANAGE_CD
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_VACINSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_VACINSTYPE.CODE_NAME = 'VAC_INS_TYPE'
		AND CDM_NXT_VACINSTYPE.DEL_FLG = '0'
		AND CDM_NXT_VACINSTYPE.VALUE1 = COL.VAC_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_VACVISITTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_VACVISITTYPE.CODE_NAME = 'VAC_VISIT_TYPE'
		AND CDM_NXT_VACVISITTYPE.DEL_FLG = '0'
		AND CDM_NXT_VACVISITTYPE.VALUE1 = COL.VAC_VISIT_TYPE

		<where>
		<if test="sosCd != null">
			<if test="bumonRank == '2'">AND JGI.UP_SOS_CD = #{sosCd}</if>
			<if test="bumonRank == '3'">AND JGI.SOS_CD = #{sosCd}</if>
		</if>
		<if test="jgiNo != null">
			AND KNR.REQ_BR_CODE = #{brCode}
			AND KNR.REQ_DIST_CODE = #{distCode}
			AND KNR.REQ_JGI_NO =  #{jgiNo}
		</if>
		<if test="insNo != null">AND HCO.INS_NO = #{insNo}</if>
		<if test="ultInsNo != null">AND MST.ULT_INS_NO = #{ultInsNo}</if>
		<if test="insKanjSrch != null">	AND MST.INS_KANJ_SRCH LIKE '%' ||#{insKanjSrch}|| '%'</if>
		<if test="shisetsuNmSrch != null">	AND MDB.SHISETSU_NM_SRCH LIKE '%' ||#{shisetsuNmSrch}|| '%'</if>
		<if test="insClass != null">AND MST.INS_CLASS = #{insClass}</if>
		<if test="insType != null">AND MST.INS_SBT = #{insType}</if>
		<if test="hoInsType != null">AND COL.HO_INS_TYPE = #{hoInsType}</if>
		<if test="shnFlgChk == '1'">AND NO_SHN.NO_SHN_CNT = 0</if>
		</where>
		ORDER BY HCO.INS_NO ASC
		OFFSET #{inOffset} ROWS FETCH FIRST #{inLimit} ROWS ONLY
	</select>
	<select id="selectNF401DataListCnt" parameterType="jp.co.takeda.rdm.entity.join.SelectNF401MainDataEntity" resultMap="nF401MainDataResultMap">
		WITH REQ_COM AS ( -- ■サブクエリ（最新の申請コメント）
			SELECT
			  COM.INS_NO
			, COM.REQ_COMMENT
			FROM(
				SELECT
				  HCO.INS_NO
				, KNR.REQ_COMMENT
				, ROW_NUMBER() OVER(PARTITION BY HCO.INS_NO ORDER BY KNR.REQ_YMDHMS DESC, KNR.REQ_ID DESC) AS SORT
				FROM
				T_RDM_REQ_KNR KNR -- 申請管理
				LEFT JOIN
				T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
				ON HCO.REQ_ID = KNR.REQ_ID
				WHERE KNR.REQ_TYPE = '21'
				AND KNR.REQ_YMDHMS IS NOT NULL
				) COM
			WHERE
			COM.SORT = 1
		),
		APR_COM AS ( -- ■サブクエリ（最新の承認・却下コメント）
			SELECT
			  COM.INS_NO
			, COM.APR_COMMENT
			FROM(
				SELECT
				  HCO.INS_NO
				, KNR.APR_COMMENT
				, ROW_NUMBER() OVER(PARTITION BY HCO.INS_NO ORDER BY KNR.APR_YMDHMS DESC, KNR.REQ_ID DESC) AS SORT
				FROM
				T_RDM_REQ_KNR KNR -- 申請管理
				LEFT JOIN
				T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
				ON HCO.REQ_ID = KNR.REQ_ID
				WHERE KNR.REQ_TYPE = '21'
				AND KNR.REQ_YMDHMS IS NOT NULL
				) COM
			WHERE
			COM.SORT = 1
		),
		APR_WAIT AS ( -- ■サブクエリ（承認待ち件数）
			SELECT
			  HCO.INS_NO
			, COUNT(KNR.REQ_ID) AS APR_WAIT_CNT
			FROM
			T_RDM_REQ_KNR KNR -- 申請管理
			LEFT JOIN
			T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
			ON HCO.REQ_ID = KNR.REQ_ID
			WHERE KNR.REQ_TYPE = '21'
			AND KNR.REQ_STS IN ('03', '13')
			GROUP BY
			HCO.INS_NO
		),
		NO_SHN AS ( -- ■サブクエリ（未審査申請数）
			SELECT
			  HCO.INS_NO
			, COUNT(KNR.REQ_ID) AS NO_SHN_CNT
			FROM
			T_RDM_REQ_KNR KNR -- 申請管理
			LEFT JOIN
			T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
			ON HCO.REQ_ID = KNR.REQ_ID
			WHERE KNR.REQ_TYPE = '21'
			AND KNR.REQ_STS IN ('03', '13')
			AND KNR.SHN_FLG = '0'
			GROUP BY
			HCO.INS_NO
		)

		SELECT
			COUNT(*) AS CNT
		FROM (
		SELECT DISTINCT
		  APR_WAIT.APR_WAIT_CNT
		, HCO.INS_NO
		, MST.INS_ABBR_NAME
		, CDM_PHARMTYPE.VALUE1_KANJ AS PHARM_TYPE
		, CDM_INSRANK.VALUE1_KANJ AS INS_RANK
		, CDM_REGVISTYPE.VALUE1_KANJ AS REG_VIS_TYPE
		, CDM_IMPHOSTYPE.VALUE1_KANJ AS IMP_HOS_TYPE
		, CDM_HOINSTYPE.VALUE1_KANJ AS HO_INS_TYPE
		, HCOKEIEI.KEIEITAI_KJ AS MANAGE_NM
		, CDM_VACINSTYPE.VALUE1_KANJ AS VAC_INS_TYPE
		, CDM_VACVISITTYPE.VALUE1_KANJ AS VAC_VISIT_TYPE
		, BEDCNT.BEDCNT_BASE
		, BEDCNT.BEDCNT04
		, BEDCNT.BEDCNT01
		, BEDCNT.BEDCNT05
		, BEDCNT.BEDCNT03
		, BEDCNT.BEDCNT07
		, BEDCNT.BEDCNT02
		, BEDCNT.BEDCNT06
		, BEDCNT.BEDS_TOT
		, BEDCNT.MED_BEDS_TOT
		, MST.ULT_INS_NO
		, MDB.SHISETSU_NM_RYAKU
		, CDM_UPHARMTYPE.VALUE1_KANJ AS SHISETSU_KBN
		, ULTKEIEI.KEIEITAI_KJ AS KEIEITAI
		, MDB.KYOKABYOSHOSU_SUM AS ULT_BEDCNT_BASE
		, MDB.KYOKABYOSHOSU_KEKKAKU AS ULT_BEDCNT04
		, MDB.KYOKABYOSHOSU_IPPAN AS ULT_BEDCNT01
		, MDB.KYOKABYOSHOSU_KANSEN AS ULT_BEDCNT05
		, MDB.KYOKABYOSHOSU_SEISHIN AS ULT_BEDCNT03
		, MDB.KYOKABYOSHOSU_RYOYO AS ULT_BEDCNT07
		, CASE COL.PHARM_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_PHARMTYPE.VALUE1_KANJ END AS NEXT_PHARM_TYPE
		, CASE COL.INS_RANK WHEN 'Z' THEN ' ' ELSE CDM_NXT_INSRANK.VALUE1_KANJ END AS NEXT_INS_RANK
		, CASE COL.PHARM_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_REGVISTYPE.VALUE1_KANJ END AS NEXT_REG_VIS_TYPE
		, CASE COL.IMP_HOS_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_IMPHOSTYPE.VALUE1_KANJ END AS NEXT_IMP_HOS_TYPE
		, CASE COL.HO_INS_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_HOINSTYPE.VALUE1_KANJ END AS NEXT_HO_INS_TYPE
		, CASE COL.MANAGE_CD WHEN 'Z' THEN ' ' ELSE NXTKEIEI.KEIEITAI_KJ END AS NEXT_MANAGE_NM
		, CASE COL.VAC_INS_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_VACINSTYPE.VALUE1_KANJ END AS NEXT_VAC_INS_TYPE
		, CASE COL.VAC_VISIT_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_VACVISITTYPE.VALUE1_KANJ END AS NEXT_VAC_VISIT_TYPE
		, COL.BEDCNT_BASE AS NEXT_BEDCNT_BASE
		, COL.BEDCNT04 AS NEXT_BEDCNT04
		, COL.BEDCNT01 AS NEXT_BEDCNT01
		, COL.BEDCNT05 AS NEXT_BEDCNT05
		, COL.BEDCNT03 AS NEXT_BEDCNT03
		, COL.BEDCNT07 AS NEXT_BEDCNT07
		, COL.BEDCNT02 AS NEXT_BEDCNT02
		, COL.BEDCNT06 AS NEXT_BEDCNT06
		, COL.BEDS_TOT AS NEXT_BEDS_TOT
		, COL.MED_BEDS_TOT AS NEXT_MED_BEDS_TOT
		, NO_SHN.NO_SHN_CNT
		, REQ_COM.REQ_COMMENT
		, APR_COM.APR_COMMENT
		FROM
		T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
		LEFT JOIN
		M_RDM_HCO_MST MST -- 施設_基本情報
		ON HCO.INS_NO = MST.INS_NO
		LEFT JOIN
		M_RDM_HCO_VAC VAC -- 施設_ワクチン情報
		ON  VAC.INS_NO = MST.INS_NO
		LEFT JOIN
		V_RDM_HCO_BEDCNT BEDCNT -- 施設_当期病床数情報ビュー
		ON BEDCNT.INS_NO = MST.INS_NO
		LEFT JOIN
		T_RDM_M_MDB_HCO_MST MDB -- ULT_MDB施設マスタ
		ON MDB.DCF_SHISETSU_CD = MST.ULT_INS_NO
		LEFT JOIN
		M_RDM_HCO_KEIEITAI_LNK_MST KEIEI -- 経営体紐付けマスタ
		ON KEIEI.KEIEITAI_CD = MDB.KEIEITAI_CD
		LEFT JOIN
		M_RDM_HCO_KEIEITAI ULTKEIEI -- 施設_経営主体マスタ
		ON ULTKEIEI.SET_DT_CD = KEIEI.SET_DT_CD
		LEFT JOIN
		V_RDM_HCO_NXT_REQ_COL COL -- 施設_来期用_申請管理_集約ビュー
		ON COL.INS_NO = HCO.INS_NO
		LEFT JOIN
		REQ_COM -- サブクエリ（最新の申請コメント）
		ON REQ_COM.INS_NO = HCO.INS_NO
		LEFT JOIN
		APR_WAIT -- サブクエリ（承認待ち件数）
		ON APR_WAIT.INS_NO = HCO.INS_NO
		LEFT JOIN
		NO_SHN -- サブクエリ（未審査申請数）
		ON NO_SHN.INS_NO = HCO.INS_NO
		LEFT JOIN
		APR_COM -- サブクエリ（最新の承認・却下コメント）
		ON APR_COM.INS_NO = HCO.INS_NO
		LEFT JOIN
		T_RDM_REQ_KNR KNR -- 申請管理
		ON KNR.REQ_ID = HCO.REQ_ID
		LEFT JOIN
		M_RDM_JGI_SOS_MST JGI -- RDM用組織従業員情報
		ON JGI.JGI_NO = KNR.REQ_JGI_NO
		LEFT JOIN
		M_RDM_CODE_MST CDM_PHARMTYPE -- コード情報
		ON 1=1
		AND CDM_PHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_PHARMTYPE.DEL_FLG = '0'
		AND CDM_PHARMTYPE.VALUE1 = MST.PHARM_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_INSRANK -- コード情報
		ON 1=1
		AND CDM_INSRANK.CODE_NAME = 'INS_RANK'
		AND CDM_INSRANK.DEL_FLG = '0'
		AND CDM_INSRANK.VALUE1 = MST.INS_RANK
		LEFT JOIN
		M_RDM_CODE_MST CDM_REGVISTYPE -- コード情報
		ON 1=1
		AND CDM_REGVISTYPE.CODE_NAME = 'REG_VIS_TYPE'
		AND CDM_REGVISTYPE.DEL_FLG = '0'
		AND CDM_REGVISTYPE.VALUE1 = MST.REG_VIS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_IMPHOSTYPE -- コード情報
		ON 1=1
		AND CDM_IMPHOSTYPE.CODE_NAME = 'IMP_HOS_TYPE'
		AND CDM_IMPHOSTYPE.DEL_FLG = '0'
		AND CDM_IMPHOSTYPE.VALUE1 = MST.IMP_HOS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_HOINSTYPE -- コード情報
		ON 1=1
		AND CDM_HOINSTYPE.CODE_NAME = 'HO_INS_TYPE'
		AND CDM_HOINSTYPE.DEL_FLG = '0'
		AND CDM_HOINSTYPE.VALUE1 = MST.HO_INS_TYPE
		LEFT JOIN
		M_RDM_HCO_KEIEITAI NXTKEIEI -- 施設_経営主体マスタ
		ON NXTKEIEI.SET_DT_CD = COL.MANAGE_CD
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACINSTYPE -- コード情報
		ON 1=1
		AND CDM_VACINSTYPE.CODE_NAME = 'VAC_INS_TYPE'
		AND CDM_VACINSTYPE.DEL_FLG = '0'
		AND CDM_VACINSTYPE.VALUE1 = VAC.VAC_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACVISITTYPE -- コード情報
		ON 1=1
		AND CDM_VACVISITTYPE.CODE_NAME = 'VAC_VISIT_TYPE'
		AND CDM_VACVISITTYPE.DEL_FLG = '0'
		AND CDM_VACVISITTYPE.VALUE1 = VAC.VAC_VISIT_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_UPHARMTYPE -- コード情報
		ON 1=1
		AND CDM_UPHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_UPHARMTYPE.DEL_FLG = '0'
		AND CDM_UPHARMTYPE.VALUE1 = MDB.SHISETSU_KBN
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_PHARMTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_PHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_NXT_PHARMTYPE.DEL_FLG = '0'
		AND CDM_NXT_PHARMTYPE.VALUE1 = COL.PHARM_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_INSRANK -- コード情報
		ON 1=1
		AND CDM_NXT_INSRANK.CODE_NAME = 'INS_RANK'
		AND CDM_NXT_INSRANK.DEL_FLG = '0'
		AND CDM_NXT_INSRANK.VALUE1 = COL.INS_RANK
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_REGVISTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_REGVISTYPE.CODE_NAME = 'REG_VIS_TYPE'
		AND CDM_NXT_REGVISTYPE.DEL_FLG = '0'
		AND CDM_NXT_REGVISTYPE.VALUE1 = COL.REG_VIS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_IMPHOSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_IMPHOSTYPE.CODE_NAME = 'IMP_HOS_TYPE'
		AND CDM_NXT_IMPHOSTYPE.DEL_FLG = '0'
		AND CDM_NXT_IMPHOSTYPE.VALUE1 = COL.IMP_HOS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_HOINSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_HOINSTYPE.CODE_NAME = 'HO_INS_TYPE'
		AND CDM_NXT_HOINSTYPE.DEL_FLG = '0'
		AND CDM_NXT_HOINSTYPE.VALUE1 = COL.HO_INS_TYPE
		LEFT JOIN
		M_RDM_HCO_KEIEITAI HCOKEIEI -- 施設_経営主体マスタ
		ON HCOKEIEI.SET_DT_CD = MST.MANAGE_CD
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_VACINSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_VACINSTYPE.CODE_NAME = 'VAC_INS_TYPE'
		AND CDM_NXT_VACINSTYPE.DEL_FLG = '0'
		AND CDM_NXT_VACINSTYPE.VALUE1 = COL.VAC_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_VACVISITTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_VACVISITTYPE.CODE_NAME = 'VAC_VISIT_TYPE'
		AND CDM_NXT_VACVISITTYPE.DEL_FLG = '0'
		AND CDM_NXT_VACVISITTYPE.VALUE1 = COL.VAC_VISIT_TYPE

		<where>
		<if test="sosCd != null">
			<if test="bumonRank == '2'">AND JGI.UP_SOS_CD = #{sosCd}</if>
			<if test="bumonRank == '3'">AND JGI.SOS_CD = #{sosCd}</if>
		</if>
		<if test="jgiNo != null">
			AND KNR.REQ_BR_CODE = #{brCode}
			AND KNR.REQ_DIST_CODE = #{distCode}
			AND KNR.REQ_JGI_NO =  #{jgiNo}
		</if>
		<if test="insNo != null">AND HCO.INS_NO = #{insNo}</if>
		<if test="ultInsNo != null">AND MST.ULT_INS_NO = #{ultInsNo}</if>
		<if test="insKanjSrch != null">	AND MST.INS_KANJ_SRCH LIKE '%' ||#{insKanjSrch}|| '%'</if>
		<if test="shisetsuNmSrch != null">	AND MDB.SHISETSU_NM_SRCH LIKE '%' ||#{shisetsuNmSrch}|| '%'</if>
		<if test="insClass != null">AND MST.INS_CLASS = #{insClass}</if>
		<if test="insType != null">AND MST.INS_SBT = #{insType}</if>
		<if test="hoInsType != null">AND COL.HO_INS_TYPE = #{hoInsType}</if>
		<if test="shnFlgChk == '1'">AND NO_SHN.NO_SHN_CNT = 0</if>
		</where>
		)
	</select>
	<select id="selectNF401ReqDataList" parameterType="jp.co.takeda.rdm.entity.join.SelectNF401ReqDataEntity" resultMap="nF401ReqDataResultMap">
		SELECT
		  KNR.REQ_ID
		, KNR.REQ_CHL
		, NXT.INS_NO
		, KNR.UPD_SHA_YMD
		FROM
		T_RDM_REQ_KNR KNR -- 申請管理
		LEFT JOIN
		T_RDM_HCO_NXT_REQ NXT -- 施設_来期用_申請管理
		ON NXT.REQ_ID = KNR.REQ_ID
		WHERE
		KNR.REQ_TYPE = '21'
		AND KNR.REQ_STS IN ('03','13')
		<if test='inInsNoList.size != 0'>
		AND NXT.INS_NO IN
			<foreach item="insNo" collection="inInsNoList" open="(" separator="," close=")">
            	#{insNo}
            </foreach>
		</if>
	</select>
	<select id="selectNF401ReqData" parameterType="jp.co.takeda.rdm.entity.join.SelectNF401ReqDataEntity" resultMap="nF401ReqDataResultMap">
		SELECT
		  KNR.REQ_ID
		, KNR.REQ_CHL
		, NXT.INS_NO
		, KNR.UPD_SHA_YMD
		FROM
		T_RDM_REQ_KNR KNR -- 申請管理
		LEFT JOIN
		T_RDM_HCO_NXT_REQ NXT -- 施設_来期用_申請管理
		ON NXT.REQ_ID = KNR.REQ_ID
		WHERE
		KNR.REQ_TYPE = '21'
		AND KNR.REQ_STS IN ('03','13')
		AND NXT.INS_NO = #{inInsNo}
	</select>
	<select id="selectNF403DataList" parameterType="jp.co.takeda.rdm.entity.join.SelectNF403MainDataEntity" resultMap="nF403MainDataResultMap">
		WITH COLOR AS ( -- ■サブクエリ（カラー判定）
		SELECT
		  INS_NO
		, CASE WHEN PHARM_TYPE IS NULL THEN '0' ELSE '1' END AS PHARM_TYPE_FLG
		, CASE WHEN INS_RANK IS NULL THEN '0' ELSE '1' END AS INS_RANK_FLG
		, CASE WHEN REG_VIS_TYPE IS NULL THEN '0' ELSE '1' END AS REG_VIS_TYPE_FLG
		, CASE WHEN IMP_HOS_TYPE IS NULL THEN '0' ELSE '1' END AS IMP_HOS_TYPE_FLG
		, CASE WHEN HO_INS_TYPE IS NULL THEN '0' ELSE '1' END AS HO_INS_TYPE_FLG
		, CASE WHEN MANAGE_CD IS NULL THEN '0' ELSE '1' END AS MANAGE_CD_FLG
		, CASE WHEN VAC_INS_TYPE IS NULL THEN '0' ELSE '1' END AS VAC_INS_TYPE_FLG
		, CASE WHEN VAC_VISIT_TYPE IS NULL THEN '0' ELSE '1' END AS VAC_VISIT_TYPE_FLG
		, CASE WHEN BEDCNT_BASE IS NULL THEN '0' ELSE '1' END AS BEDCNT_BASE_FLG
		, CASE WHEN BEDCNT04 IS NULL THEN '0' ELSE '1' END AS BEDCNT04_FLG
		, CASE WHEN BEDCNT01 IS NULL THEN '0' ELSE '1' END AS BEDCNT01_FLG
		, CASE WHEN BEDCNT05 IS NULL THEN '0' ELSE '1' END AS BEDCNT05_FLG
		, CASE WHEN BEDCNT03 IS NULL THEN '0' ELSE '1' END AS BEDCNT03_FLG
		, CASE WHEN BEDCNT07 IS NULL THEN '0' ELSE '1' END AS BEDCNT07_FLG
		, CASE WHEN BEDCNT02 IS NULL THEN '0' ELSE '1' END AS BEDCNT02_FLG
		, CASE WHEN BEDCNT06 IS NULL THEN '0' ELSE '1' END AS BEDCNT06_FLG
		, CASE WHEN BEDS_TOT IS NULL THEN '0' ELSE '1' END AS BEDS_TOT_FLG
		, CASE WHEN MED_BEDS_TOT IS NULL THEN '0' ELSE '1' END AS MED_BEDS_TOT_FLG
		FROM(
			SELECT
			  HCO.INS_NO
			, MAX(HCO.PHARM_TYPE) AS PHARM_TYPE
			, MAX(HCO.INS_RANK) AS INS_RANK
			, MAX(HCO.REG_VIS_TYPE) AS REG_VIS_TYPE
			, MAX(HCO.IMP_HOS_TYPE) AS IMP_HOS_TYPE
			, MAX(HCO.HO_INS_TYPE) AS HO_INS_TYPE
			, MAX(HCO.MANAGE_CD) AS MANAGE_CD
			, MAX(HCO.VAC_INS_TYPE) AS VAC_INS_TYPE
			, MAX(HCO.VAC_VISIT_TYPE) AS VAC_VISIT_TYPE
			, MAX(HCO.BEDCNT_BASE) AS BEDCNT_BASE
			, MAX(HCO.BEDCNT04) AS BEDCNT04
			, MAX(HCO.BEDCNT01) AS BEDCNT01
			, MAX(HCO.BEDCNT05) AS BEDCNT05
			, MAX(HCO.BEDCNT03) AS BEDCNT03
			, MAX(HCO.BEDCNT07) AS BEDCNT07
			, MAX(HCO.BEDCNT02) AS BEDCNT02
			, MAX(HCO.BEDCNT06) AS BEDCNT06
			, MAX(HCO.BEDS_TOT) AS BEDS_TOT
			, MAX(HCO.MED_BEDS_TOT) AS MED_BEDS_TOT
			FROM
			T_RDM_REQ_KNR KNR -- 申請管理
			LEFT JOIN
			T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
			ON 1=1
			AND KNR.REQ_ID = HCO.REQ_ID
			WHERE 1=1
			<if test="insNo != null">AND KNR.INS_NO = #{insNo}</if>
			AND KNR.REQ_TYPE = '21'
			AND KNR.REQ_STS IN ('03', '13', '04', '14')
			GROUP BY
			HCO.INS_NO
			)
		),
		REQ_COM AS ( -- ■サブクエリ（最新の申請コメント）
			SELECT
			  COM.INS_NO
			, COM.REQ_COMMENT
			FROM(
				SELECT
				  HCO.INS_NO
				, KNR.REQ_COMMENT
				, ROW_NUMBER() OVER(PARTITION BY HCO.INS_NO ORDER BY KNR.REQ_YMDHMS DESC, KNR.REQ_ID DESC) AS SORT
				FROM
				T_RDM_REQ_KNR KNR -- 申請管理
				LEFT JOIN
				T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
				ON HCO.REQ_ID = KNR.REQ_ID
				WHERE KNR.REQ_TYPE = '21'
				AND KNR.REQ_STS IN ('04','14')
				) COM
			WHERE
			COM.SORT = 1
		),
		REQ_UPD_DT AS (
			SELECT
			  INS_NO
			, MAX(UPD_SHA_YMD) AS UPD_SHA_YMD
			FROM
			T_RDM_REQ_KNR
			WHERE REQ_TYPE = '21'
			AND REQ_YMDHMS IS NOT NULL
			GROUP BY
			INS_NO
		)

		SELECT DISTINCT
		  MST.INS_NO
		, MST.INS_ABBR_NAME
		, MST.INS_SBT AS INS_TYPE
		, MST.PHARM_TYPE
		, CDM_PHARMTYPE.VALUE1_KANJ AS PHARM_TYPE_NM
		, MST.INS_RANK
		, CDM_INSRANK.VALUE1_KANJ AS INS_RANK_NM
		, MST.REG_VIS_TYPE
		, CDM_REGVISTYPE.VALUE1_KANJ AS REG_VIS_TYPE_NM
		, MST.IMP_HOS_TYPE
		, CDM_IMPHOSTYPE.VALUE1_KANJ AS IMP_HOS_TYPE_NM
		, MST.HO_INS_TYPE
		, CDM_HOINSTYPE.VALUE1_KANJ AS HO_INS_TYPE_NM
		, MST.MANAGE_CD
		, HCOKEIEI.KEIEITAI_KJ AS MANAGE_NM
		, VAC.VAC_INS_TYPE
		, CDM_VACINSTYPE.VALUE1_KANJ AS VAC_INS_TYPE_NM
		, VAC.VAC_VISIT_TYPE
		, CDM_VACVISITTYPE.VALUE1_KANJ AS VAC_VISIT_TYPE_NM
		, BEDCNT.BEDCNT_BASE
		, BEDCNT.BEDCNT04
		, BEDCNT.BEDCNT01
		, BEDCNT.BEDCNT05
		, BEDCNT.BEDCNT03
		, BEDCNT.BEDCNT07
		, BEDCNT.BEDCNT02
		, BEDCNT.BEDCNT06
		, BEDCNT.BEDS_TOT
		, BEDCNT.MED_BEDS_TOT
		, MST.ULT_INS_NO
		, MDB.SHISETSU_NM_RYAKU
		, CDM_UPHARMTYPE.VALUE1_KANJ AS SHISETSU_KBN
		, ULTKEIEI.KEIEITAI_KJ AS KEIEITAI
		, MDB.KYOKABYOSHOSU_SUM AS ULT_BEDCNT_BASE
		, MDB.KYOKABYOSHOSU_KEKKAKU AS ULT_BEDCNT04
		, MDB.KYOKABYOSHOSU_IPPAN AS ULT_BEDCNT01
		, MDB.KYOKABYOSHOSU_KANSEN AS ULT_BEDCNT05
		, MDB.KYOKABYOSHOSU_SEISHIN AS ULT_BEDCNT03
		, MDB.KYOKABYOSHOSU_RYOYO AS ULT_BEDCNT07
		, CASE COL.PHARM_TYPE WHEN 'Z' THEN '' ELSE COL.PHARM_TYPE END AS NEXT_PHARM_TYPE
		, CASE COL.INS_RANK WHEN 'Z' THEN '' ELSE COL.INS_RANK END AS NEXT_INS_RANK
		, CASE COL.REG_VIS_TYPE WHEN 'Z' THEN '' ELSE COL.REG_VIS_TYPE END AS NEXT_REG_VIS_TYPE
		, CASE COL.IMP_HOS_TYPE WHEN 'Z' THEN '' ELSE COL.IMP_HOS_TYPE END AS NEXT_IMP_HOS_TYPE
		, CASE COL.HO_INS_TYPE WHEN 'Z' THEN '' ELSE COL.HO_INS_TYPE END AS NEXT_HO_INS_TYPE
		, CASE COL.MANAGE_CD WHEN 'Z' THEN '' ELSE COL.MANAGE_CD END AS NEXT_MANAGE_NM
		, CASE COL.VAC_INS_TYPE WHEN 'Z' THEN '' ELSE COL.VAC_INS_TYPE END AS NEXT_VAC_INS_TYPE
		, CASE COL.VAC_VISIT_TYPE WHEN 'Z' THEN '' ELSE COL.VAC_VISIT_TYPE END AS NEXT_VAC_VISIT_TYPE
		, COL.BEDCNT_BASE AS NEXT_BEDCNT_BASE
		, COL.BEDCNT04 AS NEXT_BEDCNT04
		, COL.BEDCNT01 AS NEXT_BEDCNT01
		, COL.BEDCNT05 AS NEXT_BEDCNT05
		, COL.BEDCNT03 AS NEXT_BEDCNT03
		, COL.BEDCNT07 AS NEXT_BEDCNT07
		, COL.BEDCNT02 AS NEXT_BEDCNT02
		, COL.BEDCNT06 AS NEXT_BEDCNT06
		, COL.BEDS_TOT AS NEXT_BEDS_TOT
		, COL.MED_BEDS_TOT AS NEXT_MED_BEDS_TOT
		, REQ_COM.REQ_COMMENT
		, COLOR.PHARM_TYPE_FLG
		, COLOR.INS_RANK_FLG
		, COLOR.REG_VIS_TYPE_FLG
		, COLOR.IMP_HOS_TYPE_FLG
		, COLOR.HO_INS_TYPE_FLG
		, COLOR.MANAGE_CD_FLG
		, COLOR.VAC_INS_TYPE_FLG
		, COLOR.VAC_VISIT_TYPE_FLG
		, COLOR.BEDCNT_BASE_FLG
		, COLOR.BEDCNT04_FLG
		, COLOR.BEDCNT01_FLG
		, COLOR.BEDCNT05_FLG
		, COLOR.BEDCNT03_FLG
		, COLOR.BEDCNT07_FLG
		, COLOR.BEDCNT02_FLG
		, COLOR.BEDCNT06_FLG
		, COLOR.BEDS_TOT_FLG
		, COLOR.MED_BEDS_TOT_FLG
		, CASE WHEN (BEDCNT.BEDCNT_BASE <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_SUM)
			OR BEDCNT.BEDCNT04 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_KEKKAKU)
			OR BEDCNT.BEDCNT01 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_IPPAN)
			OR BEDCNT.BEDCNT05 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_KANSEN)
			OR BEDCNT.BEDCNT03 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_SEISHIN)
			OR BEDCNT.BEDCNT07 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_RYOYO)
			) THEN '有' ELSE ' ' END AS ULT_DIF
		,REQ_UPD_DT.UPD_SHA_YMD
		FROM
		M_RDM_HCO_MST MST -- 施設_基本情報
		LEFT JOIN
		REQ_UPD_DT
		ON REQ_UPD_DT.INS_NO = MST.INS_NO
		LEFT JOIN
		M_RDM_HCO_VAC VAC -- 施設_ワクチン情報
		ON  VAC.INS_NO = MST.INS_NO
		LEFT JOIN
		V_RDM_HCO_BEDCNT BEDCNT -- 施設_当期病床数情報ビュー
		ON BEDCNT.INS_NO = MST.INS_NO
		LEFT JOIN
		T_RDM_M_MDB_HCO_MST MDB -- ULT_MDB施設マスタ
		ON MDB.DCF_SHISETSU_CD = MST.ULT_INS_NO
		LEFT JOIN
		M_RDM_HCO_KEIEITAI_LNK_MST KEIEI -- 経営体紐付けマスタ
		ON KEIEI.KEIEITAI_CD = MDB.KEIEITAI_CD
		LEFT JOIN
		M_RDM_HCO_KEIEITAI ULTKEIEI -- 施設_経営主体マスタ
		ON ULTKEIEI.SET_DT_CD = KEIEI.SET_DT_CD
		LEFT JOIN
		V_RDM_HCO_NXT_REQ_COL COL -- 施設_来期用_申請管理_集約ビュー
		ON COL.INS_NO = MST.INS_NO
		LEFT JOIN
		COLOR -- サブクエリ（カラー判定）
		ON COLOR.INS_NO = MST.INS_NO
		LEFT JOIN
		REQ_COM -- サブクエリ（最新の申請コメント）
		ON MST.INS_NO = REQ_COM.INS_NO
		LEFT JOIN
		M_RDM_JKR_MR_INS_TRT MR -- RDM用施設担当者情報
		ON MR.INS_NO = MST.INS_NO
		LEFT JOIN
		M_RDM_JGI_SOS_MST JGI -- RDM用組織従業員情報
		ON JGI.JGI_NO = MR.JGI_NO
		LEFT JOIN
		M_RDM_CODE_MST CDM_PHARMTYPE -- コード情報
		ON 1=1
		AND CDM_PHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_PHARMTYPE.DEL_FLG = '0'
		AND CDM_PHARMTYPE.VALUE1 = MST.PHARM_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_INSRANK -- コード情報
		ON 1=1
		AND CDM_INSRANK.CODE_NAME = 'INS_RANK'
		AND CDM_INSRANK.DEL_FLG = '0'
		AND CDM_INSRANK.VALUE1 = MST.INS_RANK
		LEFT JOIN
		M_RDM_CODE_MST CDM_REGVISTYPE -- コード情報
		ON 1=1
		AND CDM_REGVISTYPE.CODE_NAME = 'REG_VIS_TYPE'
		AND CDM_REGVISTYPE.DEL_FLG = '0'
		AND CDM_REGVISTYPE.VALUE1 = MST.REG_VIS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_IMPHOSTYPE -- コード情報
		ON 1=1
		AND CDM_IMPHOSTYPE.CODE_NAME = 'IMP_HOS_TYPE'
		AND CDM_IMPHOSTYPE.DEL_FLG = '0'
		AND CDM_IMPHOSTYPE.VALUE1 = MST.IMP_HOS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_HOINSTYPE -- コード情報
		ON 1=1
		AND CDM_HOINSTYPE.CODE_NAME = 'HO_INS_TYPE'
		AND CDM_HOINSTYPE.DEL_FLG = '0'
		AND CDM_HOINSTYPE.VALUE1 = MST.HO_INS_TYPE
		LEFT JOIN
		M_RDM_HCO_KEIEITAI NXTKEIEI -- 施設_経営主体マスタ
		ON NXTKEIEI.SET_DT_CD = COL.MANAGE_CD
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACINSTYPE -- コード情報
		ON 1=1
		AND CDM_VACINSTYPE.CODE_NAME = 'VAC_INS_TYPE'
		AND CDM_VACINSTYPE.DEL_FLG = '0'
		AND CDM_VACINSTYPE.VALUE1 = VAC.VAC_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACVISITTYPE -- コード情報
		ON 1=1
		AND CDM_VACVISITTYPE.CODE_NAME = 'VAC_VISIT_TYPE'
		AND CDM_VACVISITTYPE.DEL_FLG = '0'
		AND CDM_VACVISITTYPE.VALUE1 = VAC.VAC_VISIT_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_UPHARMTYPE -- コード情報
		ON 1=1
		AND CDM_UPHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_UPHARMTYPE.DEL_FLG = '0'
		AND CDM_UPHARMTYPE.VALUE1 = MDB.SHISETSU_KBN
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_PHARMTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_PHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_NXT_PHARMTYPE.DEL_FLG = '0'
		AND CDM_NXT_PHARMTYPE.VALUE1 = COL.PHARM_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_INSRANK -- コード情報
		ON 1=1
		AND CDM_NXT_INSRANK.CODE_NAME = 'INS_RANK'
		AND CDM_NXT_INSRANK.DEL_FLG = '0'
		AND CDM_NXT_INSRANK.VALUE1 = COL.INS_RANK
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_REGVISTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_REGVISTYPE.CODE_NAME = 'REG_VIS_TYPE'
		AND CDM_NXT_REGVISTYPE.DEL_FLG = '0'
		AND CDM_NXT_REGVISTYPE.VALUE1 = COL.REG_VIS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_IMPHOSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_IMPHOSTYPE.CODE_NAME = 'IMP_HOS_TYPE'
		AND CDM_NXT_IMPHOSTYPE.DEL_FLG = '0'
		AND CDM_NXT_IMPHOSTYPE.VALUE1 = COL.IMP_HOS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_HOINSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_HOINSTYPE.CODE_NAME = 'HO_INS_TYPE'
		AND CDM_NXT_HOINSTYPE.DEL_FLG = '0'
		AND CDM_NXT_HOINSTYPE.VALUE1 = COL.HO_INS_TYPE
		LEFT JOIN
		M_RDM_HCO_KEIEITAI HCOKEIEI -- 施設_経営主体マスタ
		ON HCOKEIEI.SET_DT_CD = MST.MANAGE_CD
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_VACINSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_VACINSTYPE.CODE_NAME = 'VAC_INS_TYPE'
		AND CDM_NXT_VACINSTYPE.DEL_FLG = '0'
		AND CDM_NXT_VACINSTYPE.VALUE1 = COL.VAC_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_VACVISITTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_VACVISITTYPE.CODE_NAME = 'VAC_VISIT_TYPE'
		AND CDM_NXT_VACVISITTYPE.DEL_FLG = '0'
		AND CDM_NXT_VACVISITTYPE.VALUE1 = COL.VAC_VISIT_TYPE

		<where>
		MST.DEL_FLG = '0'
		<if test="sosCd != null">
			<if test="bumonRank == '2'">AND JGI.UP_SOS_CD = #{sosCd}</if>
			<if test="bumonRank == '3'">AND JGI.SOS_CD = #{sosCd}</if>
		</if>
		<if test="jgiNo != null">
			AND JGI.BR_CODE = #{brCode}
			AND JGI.DIST_CODE = #{distCode}
			AND JGI.JGI_NO =  #{jgiNo}
		</if>
		<if test="insNo != null">AND MST.INS_NO = #{insNo}</if>
		<if test="ultInsNo != null">AND MST.ULT_INS_NO = #{ultInsNo}</if>
		<if test="insKanjSrch != null">	AND MST.INS_KANJ_SRCH LIKE '%' ||#{insKanjSrch}|| '%'</if>
		<if test="shisetsuNmSrch != null">	AND MDB.SHISETSU_NM_SRCH LIKE '%' ||#{shisetsuNmSrch}|| '%'</if>
		<if test="insClass != null">AND MST.INS_CLASS = #{insClass}</if>
		<if test="insType != null">AND MST.INS_SBT = #{insType}</if>
		<if test="hoInsType != null">AND MST.HO_INS_TYPE = #{hoInsType}</if>
		<if test="ultDif == 1">
			AND (BEDCNT.BEDCNT_BASE <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_SUM)
			OR BEDCNT.BEDCNT04 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_KEKKAKU)
			OR BEDCNT.BEDCNT01 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_IPPAN)
			OR BEDCNT.BEDCNT05 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_KANSEN)
			OR BEDCNT.BEDCNT03 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_SEISHIN)
			OR BEDCNT.BEDCNT07 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_RYOYO)
			)
		</if>
		<if test="ultDif == 0">
			AND (BEDCNT.BEDCNT_BASE = TO_CHAR(MDB.KYOKABYOSHOSU_SUM)
			AND BEDCNT.BEDCNT04 = TO_CHAR(MDB.KYOKABYOSHOSU_KEKKAKU)
			AND BEDCNT.BEDCNT01 = TO_CHAR(MDB.KYOKABYOSHOSU_IPPAN)
			AND BEDCNT.BEDCNT05 = TO_CHAR(MDB.KYOKABYOSHOSU_KANSEN)
			AND BEDCNT.BEDCNT03 = TO_CHAR(MDB.KYOKABYOSHOSU_SEISHIN)
			AND BEDCNT.BEDCNT07 = TO_CHAR(MDB.KYOKABYOSHOSU_RYOYO)
			)
		</if>
		</where>
		ORDER BY MST.INS_NO ASC
		OFFSET #{inOffset} ROWS FETCH FIRST #{inLimit} ROWS ONLY
	</select>
	<select id="selectNF403DataListCnt" parameterType="jp.co.takeda.rdm.entity.join.SelectNF403MainDataEntity" resultMap="nF403MainDataResultMap">
		WITH COLOR AS ( -- ■サブクエリ（カラー判定）
		SELECT
		  INS_NO
		, CASE WHEN PHARM_TYPE IS NULL THEN '0' ELSE '1' END AS PHARM_TYPE_FLG
		, CASE WHEN INS_RANK IS NULL THEN '0' ELSE '1' END AS INS_RANK_FLG
		, CASE WHEN REG_VIS_TYPE IS NULL THEN '0' ELSE '1' END AS REG_VIS_TYPE_FLG
		, CASE WHEN IMP_HOS_TYPE IS NULL THEN '0' ELSE '1' END AS IMP_HOS_TYPE_FLG
		, CASE WHEN HO_INS_TYPE IS NULL THEN '0' ELSE '1' END AS HO_INS_TYPE_FLG
		, CASE WHEN MANAGE_CD IS NULL THEN '0' ELSE '1' END AS MANAGE_CD_FLG
		, CASE WHEN VAC_INS_TYPE IS NULL THEN '0' ELSE '1' END AS VAC_INS_TYPE_FLG
		, CASE WHEN VAC_VISIT_TYPE IS NULL THEN '0' ELSE '1' END AS VAC_VISIT_TYPE_FLG
		, CASE WHEN BEDCNT_BASE IS NULL THEN '0' ELSE '1' END AS BEDCNT_BASE_FLG
		, CASE WHEN BEDCNT04 IS NULL THEN '0' ELSE '1' END AS BEDCNT04_FLG
		, CASE WHEN BEDCNT01 IS NULL THEN '0' ELSE '1' END AS BEDCNT01_FLG
		, CASE WHEN BEDCNT05 IS NULL THEN '0' ELSE '1' END AS BEDCNT05_FLG
		, CASE WHEN BEDCNT03 IS NULL THEN '0' ELSE '1' END AS BEDCNT03_FLG
		, CASE WHEN BEDCNT07 IS NULL THEN '0' ELSE '1' END AS BEDCNT07_FLG
		, CASE WHEN BEDCNT02 IS NULL THEN '0' ELSE '1' END AS BEDCNT02_FLG
		, CASE WHEN BEDCNT06 IS NULL THEN '0' ELSE '1' END AS BEDCNT06_FLG
		, CASE WHEN BEDS_TOT IS NULL THEN '0' ELSE '1' END AS BEDS_TOT_FLG
		, CASE WHEN MED_BEDS_TOT IS NULL THEN '0' ELSE '1' END AS MED_BEDS_TOT_FLG
		FROM(
			SELECT
			  HCO.INS_NO
			, MAX(HCO.PHARM_TYPE) AS PHARM_TYPE
			, MAX(HCO.INS_RANK) AS INS_RANK
			, MAX(HCO.REG_VIS_TYPE) AS REG_VIS_TYPE
			, MAX(HCO.IMP_HOS_TYPE) AS IMP_HOS_TYPE
			, MAX(HCO.HO_INS_TYPE) AS HO_INS_TYPE
			, MAX(HCO.MANAGE_CD) AS MANAGE_CD
			, MAX(HCO.VAC_INS_TYPE) AS VAC_INS_TYPE
			, MAX(HCO.VAC_VISIT_TYPE) AS VAC_VISIT_TYPE
			, MAX(HCO.BEDCNT_BASE) AS BEDCNT_BASE
			, MAX(HCO.BEDCNT04) AS BEDCNT04
			, MAX(HCO.BEDCNT01) AS BEDCNT01
			, MAX(HCO.BEDCNT05) AS BEDCNT05
			, MAX(HCO.BEDCNT03) AS BEDCNT03
			, MAX(HCO.BEDCNT07) AS BEDCNT07
			, MAX(HCO.BEDCNT02) AS BEDCNT02
			, MAX(HCO.BEDCNT06) AS BEDCNT06
			, MAX(HCO.BEDS_TOT) AS BEDS_TOT
			, MAX(HCO.MED_BEDS_TOT) AS MED_BEDS_TOT
			FROM
			T_RDM_REQ_KNR KNR -- 申請管理
			LEFT JOIN
			T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
			ON 1=1
			AND KNR.REQ_ID = HCO.REQ_ID
			WHERE 1=1
			<if test="insNo != null">AND KNR.INS_NO = #{insNo}</if>
			AND KNR.REQ_TYPE = '21'
			AND KNR.REQ_STS IN ('03', '13', '04', '14')
			GROUP BY
			HCO.INS_NO
			)
		),
		REQ_COM AS ( -- ■サブクエリ（最新の申請コメント）
			SELECT
			  COM.INS_NO
			, COM.REQ_COMMENT
			FROM(
				SELECT
				  HCO.INS_NO
				, KNR.REQ_COMMENT
				, ROW_NUMBER() OVER(PARTITION BY HCO.INS_NO ORDER BY KNR.REQ_YMDHMS DESC, KNR.REQ_ID DESC) AS SORT
				FROM
				T_RDM_REQ_KNR KNR -- 申請管理
				LEFT JOIN
				T_RDM_HCO_NXT_REQ HCO -- 施設_来期用_申請管理
				ON HCO.REQ_ID = KNR.REQ_ID
				WHERE KNR.REQ_TYPE = '21'
				AND KNR.REQ_STS IN ('04','14')
				) COM
			WHERE
			COM.SORT = 1
		),
		REQ_UPD_DT AS (
			SELECT
			  INS_NO
			, MAX(UPD_SHA_YMD) AS UPD_SHA_YMD
			FROM
			T_RDM_REQ_KNR
			WHERE REQ_TYPE = '21'
			AND REQ_YMDHMS IS NOT NULL
			GROUP BY
			INS_NO
		)

		SELECT
		  COUNT(*) AS CNT
		FROM(
		SELECT DISTINCT
		  MST.INS_NO
		, MST.INS_ABBR_NAME
		, MST.INS_SBT AS INS_TYPE
		, MST.PHARM_TYPE
		, CDM_PHARMTYPE.VALUE1_KANJ AS PHARM_TYPE_NM
		, MST.INS_RANK
		, CDM_INSRANK.VALUE1_KANJ AS INS_RANK_NM
		, MST.REG_VIS_TYPE
		, CDM_REGVISTYPE.VALUE1_KANJ AS REG_VIS_TYPE_NM
		, MST.IMP_HOS_TYPE
		, CDM_IMPHOSTYPE.VALUE1_KANJ AS IMP_HOS_TYPE_NM
		, MST.HO_INS_TYPE
		, CDM_HOINSTYPE.VALUE1_KANJ AS HO_INS_TYPE_NM
		, MST.MANAGE_CD
		, HCOKEIEI.KEIEITAI_KJ AS MANAGE_NM
		, VAC.VAC_INS_TYPE
		, CDM_VACINSTYPE.VALUE1_KANJ AS VAC_INS_TYPE_NM
		, VAC.VAC_VISIT_TYPE
		, CDM_VACVISITTYPE.VALUE1_KANJ AS VAC_VISIT_TYPE_NM
		, BEDCNT.BEDCNT_BASE
		, BEDCNT.BEDCNT04
		, BEDCNT.BEDCNT01
		, BEDCNT.BEDCNT05
		, BEDCNT.BEDCNT03
		, BEDCNT.BEDCNT07
		, BEDCNT.BEDCNT02
		, BEDCNT.BEDCNT06
		, BEDCNT.BEDS_TOT
		, BEDCNT.MED_BEDS_TOT
		, MST.ULT_INS_NO
		, MDB.SHISETSU_NM_RYAKU
		, CDM_UPHARMTYPE.VALUE1_KANJ AS SHISETSU_KBN
		, ULTKEIEI.KEIEITAI_KJ AS KEIEITAI
		, MDB.KYOKABYOSHOSU_SUM AS ULT_BEDCNT_BASE
		, MDB.KYOKABYOSHOSU_KEKKAKU AS ULT_BEDCNT04
		, MDB.KYOKABYOSHOSU_IPPAN AS ULT_BEDCNT01
		, MDB.KYOKABYOSHOSU_KANSEN AS ULT_BEDCNT05
		, MDB.KYOKABYOSHOSU_SEISHIN AS ULT_BEDCNT03
		, MDB.KYOKABYOSHOSU_RYOYO AS ULT_BEDCNT07
		, CASE COL.PHARM_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_PHARMTYPE.VALUE1_KANJ END AS NEXT_PHARM_TYPE
		, CASE COL.INS_RANK WHEN 'Z' THEN ' ' ELSE CDM_NXT_INSRANK.VALUE1_KANJ END AS NEXT_INS_RANK
		, CASE COL.PHARM_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_REGVISTYPE.VALUE1_KANJ END AS NEXT_REG_VIS_TYPE
		, CASE COL.IMP_HOS_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_IMPHOSTYPE.VALUE1_KANJ END AS NEXT_IMP_HOS_TYPE
		, CASE COL.HO_INS_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_HOINSTYPE.VALUE1_KANJ END AS NEXT_HO_INS_TYPE
		, CASE COL.MANAGE_CD WHEN 'Z' THEN ' ' ELSE NXTKEIEI.KEIEITAI_KJ END AS NEXT_MANAGE_NM
		, CASE COL.VAC_INS_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_VACINSTYPE.VALUE1_KANJ END AS NEXT_VAC_INS_TYPE
		, CASE COL.VAC_VISIT_TYPE WHEN 'Z' THEN ' ' ELSE CDM_NXT_VACVISITTYPE.VALUE1_KANJ END AS NEXT_VAC_VISIT_TYPE
		, COL.BEDCNT_BASE AS NEXT_BEDCNT_BASE
		, COL.BEDCNT04 AS NEXT_BEDCNT04
		, COL.BEDCNT01 AS NEXT_BEDCNT01
		, COL.BEDCNT05 AS NEXT_BEDCNT05
		, COL.BEDCNT03 AS NEXT_BEDCNT03
		, COL.BEDCNT07 AS NEXT_BEDCNT07
		, COL.BEDCNT02 AS NEXT_BEDCNT02
		, COL.BEDCNT06 AS NEXT_BEDCNT06
		, COL.BEDS_TOT AS NEXT_BEDS_TOT
		, COL.MED_BEDS_TOT AS NEXT_MED_BEDS_TOT
		, REQ_COM.REQ_COMMENT
		, COLOR.PHARM_TYPE_FLG
		, COLOR.INS_RANK_FLG
		, COLOR.REG_VIS_TYPE_FLG
		, COLOR.IMP_HOS_TYPE_FLG
		, COLOR.MANAGE_CD_FLG
		, COLOR.VAC_INS_TYPE_FLG
		, COLOR.VAC_VISIT_TYPE_FLG
		, COLOR.BEDCNT_BASE_FLG
		, COLOR.BEDCNT04_FLG
		, COLOR.BEDCNT01_FLG
		, COLOR.BEDCNT05_FLG
		, COLOR.BEDCNT03_FLG
		, COLOR.BEDCNT07_FLG
		, COLOR.BEDCNT02_FLG
		, COLOR.BEDCNT06_FLG
		, COLOR.BEDS_TOT_FLG
		, COLOR.MED_BEDS_TOT_FLG
		, CASE WHEN (BEDCNT.BEDCNT_BASE <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_SUM)
			OR BEDCNT.BEDCNT04 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_KEKKAKU)
			OR BEDCNT.BEDCNT01 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_IPPAN)
			OR BEDCNT.BEDCNT05 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_KANSEN)
			OR BEDCNT.BEDCNT03 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_SEISHIN)
			OR BEDCNT.BEDCNT07 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_RYOYO)
			) THEN '有' ELSE ' ' END AS ULT_DIF
		,REQ_UPD_DT.UPD_SHA_YMD
		FROM
		M_RDM_HCO_MST MST -- 施設_基本情報
		LEFT JOIN
		REQ_UPD_DT
		ON REQ_UPD_DT.INS_NO = MST.INS_NO
		LEFT JOIN
		M_RDM_HCO_VAC VAC -- 施設_ワクチン情報
		ON  VAC.INS_NO = MST.INS_NO
		LEFT JOIN
		V_RDM_HCO_BEDCNT BEDCNT -- 施設_当期病床数情報ビュー
		ON BEDCNT.INS_NO = MST.INS_NO
		LEFT JOIN
		T_RDM_M_MDB_HCO_MST MDB -- ULT_MDB施設マスタ
		ON MDB.DCF_SHISETSU_CD = MST.ULT_INS_NO
		LEFT JOIN
		M_RDM_HCO_KEIEITAI_LNK_MST KEIEI -- 経営体紐付けマスタ
		ON KEIEI.KEIEITAI_CD = MDB.KEIEITAI_CD
		LEFT JOIN
		M_RDM_HCO_KEIEITAI ULTKEIEI -- 施設_経営主体マスタ
		ON ULTKEIEI.SET_DT_CD = KEIEI.SET_DT_CD
		LEFT JOIN
		V_RDM_HCO_NXT_REQ_COL COL -- 施設_来期用_申請管理_集約ビュー
		ON COL.INS_NO = MST.INS_NO
		LEFT JOIN
		COLOR -- サブクエリ（カラー判定）
		ON COLOR.INS_NO = MST.INS_NO
		LEFT JOIN
		REQ_COM -- サブクエリ（最新の申請コメント）
		ON MST.INS_NO = MST.INS_NO
		LEFT JOIN
		M_RDM_JKR_MR_INS_TRT MR -- RDM用施設担当者情報
		ON MR.INS_NO = MST.INS_NO
		LEFT JOIN
		M_RDM_JGI_SOS_MST JGI -- RDM用組織従業員情報
		ON JGI.JGI_NO = MR.JGI_NO
		LEFT JOIN
		M_RDM_CODE_MST CDM_PHARMTYPE -- コード情報
		ON 1=1
		AND CDM_PHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_PHARMTYPE.DEL_FLG = '0'
		AND CDM_PHARMTYPE.VALUE1 = MST.PHARM_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_INSRANK -- コード情報
		ON 1=1
		AND CDM_INSRANK.CODE_NAME = 'INS_RANK'
		AND CDM_INSRANK.DEL_FLG = '0'
		AND CDM_INSRANK.VALUE1 = MST.INS_RANK
		LEFT JOIN
		M_RDM_CODE_MST CDM_REGVISTYPE -- コード情報
		ON 1=1
		AND CDM_REGVISTYPE.CODE_NAME = 'REG_VIS_TYPE'
		AND CDM_REGVISTYPE.DEL_FLG = '0'
		AND CDM_REGVISTYPE.VALUE1 = MST.REG_VIS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_IMPHOSTYPE -- コード情報
		ON 1=1
		AND CDM_IMPHOSTYPE.CODE_NAME = 'IMP_HOS_TYPE'
		AND CDM_IMPHOSTYPE.DEL_FLG = '0'
		AND CDM_IMPHOSTYPE.VALUE1 = MST.IMP_HOS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_HOINSTYPE -- コード情報
		ON 1=1
		AND CDM_HOINSTYPE.CODE_NAME = 'HO_INS_TYPE'
		AND CDM_HOINSTYPE.DEL_FLG = '0'
		AND CDM_HOINSTYPE.VALUE1 = MST.HO_INS_TYPE
		LEFT JOIN
		M_RDM_HCO_KEIEITAI NXTKEIEI -- 施設_経営主体マスタ
		ON NXTKEIEI.SET_DT_CD = COL.MANAGE_CD
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACINSTYPE -- コード情報
		ON 1=1
		AND CDM_VACINSTYPE.CODE_NAME = 'VAC_INS_TYPE'
		AND CDM_VACINSTYPE.DEL_FLG = '0'
		AND CDM_VACINSTYPE.VALUE1 = VAC.VAC_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_VACVISITTYPE -- コード情報
		ON 1=1
		AND CDM_VACVISITTYPE.CODE_NAME = 'VAC_VISIT_TYPE'
		AND CDM_VACVISITTYPE.DEL_FLG = '0'
		AND CDM_VACVISITTYPE.VALUE1 = VAC.VAC_VISIT_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_UPHARMTYPE -- コード情報
		ON 1=1
		AND CDM_UPHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_UPHARMTYPE.DEL_FLG = '0'
		AND CDM_UPHARMTYPE.VALUE1 = MDB.SHISETSU_KBN
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_PHARMTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_PHARMTYPE.CODE_NAME = 'PHARM_TYPE'
		AND CDM_NXT_PHARMTYPE.DEL_FLG = '0'
		AND CDM_NXT_PHARMTYPE.VALUE1 = COL.PHARM_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_INSRANK -- コード情報
		ON 1=1
		AND CDM_NXT_INSRANK.CODE_NAME = 'INS_RANK'
		AND CDM_NXT_INSRANK.DEL_FLG = '0'
		AND CDM_NXT_INSRANK.VALUE1 = COL.INS_RANK
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_REGVISTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_REGVISTYPE.CODE_NAME = 'REG_VIS_TYPE'
		AND CDM_NXT_REGVISTYPE.DEL_FLG = '0'
		AND CDM_NXT_REGVISTYPE.VALUE1 = COL.REG_VIS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_IMPHOSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_IMPHOSTYPE.CODE_NAME = 'IMP_HOS_TYPE'
		AND CDM_NXT_IMPHOSTYPE.DEL_FLG = '0'
		AND CDM_NXT_IMPHOSTYPE.VALUE1 = COL.IMP_HOS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_HOINSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_HOINSTYPE.CODE_NAME = 'HO_INS_TYPE'
		AND CDM_NXT_HOINSTYPE.DEL_FLG = '0'
		AND CDM_NXT_HOINSTYPE.VALUE1 = COL.HO_INS_TYPE
		LEFT JOIN
		M_RDM_HCO_KEIEITAI HCOKEIEI -- 施設_経営主体マスタ
		ON HCOKEIEI.SET_DT_CD = MST.MANAGE_CD
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_VACINSTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_VACINSTYPE.CODE_NAME = 'VAC_INS_TYPE'
		AND CDM_NXT_VACINSTYPE.DEL_FLG = '0'
		AND CDM_NXT_VACINSTYPE.VALUE1 = COL.VAC_INS_TYPE
		LEFT JOIN
		M_RDM_CODE_MST CDM_NXT_VACVISITTYPE -- コード情報
		ON 1=1
		AND CDM_NXT_VACVISITTYPE.CODE_NAME = 'VAC_VISIT_TYPE'
		AND CDM_NXT_VACVISITTYPE.DEL_FLG = '0'
		AND CDM_NXT_VACVISITTYPE.VALUE1 = COL.VAC_VISIT_TYPE

		<where>
		MST.DEL_FLG = '0'
		<if test="sosCd != null">
			<if test="bumonRank == '2'">AND JGI.UP_SOS_CD = #{sosCd}</if>
			<if test="bumonRank == '3'">AND JGI.SOS_CD = #{sosCd}</if>
		</if>
		<if test="jgiNo != null">
			AND JGI.BR_CODE = #{brCode}
			AND JGI.DIST_CODE = #{distCode}
			AND JGI.JGI_NO =  #{jgiNo}
		</if>
		<if test="insNo != null">AND MST.INS_NO = #{insNo}</if>
		<if test="ultInsNo != null">AND MST.ULT_INS_NO = #{ultInsNo}</if>
		<if test="insKanjSrch != null">	AND MST.INS_KANJ_SRCH LIKE '%' ||#{insKanjSrch}|| '%'</if>
		<if test="shisetsuNmSrch != null">	AND MDB.SHISETSU_NM_SRCH LIKE '%' ||#{shisetsuNmSrch}|| '%'</if>
		<if test="insClass != null">AND MST.INS_CLASS = #{insClass}</if>
		<if test="insType != null">AND MST.INS_SBT = #{insType}</if>
		<if test="hoInsType != null">AND MST.HO_INS_TYPE = #{hoInsType}</if>
		<if test="ultDif == 1">
			AND (BEDCNT.BEDCNT_BASE <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_SUM)
			OR BEDCNT.BEDCNT04 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_KEKKAKU)
			OR BEDCNT.BEDCNT01 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_IPPAN)
			OR BEDCNT.BEDCNT05 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_KANSEN)
			OR BEDCNT.BEDCNT03 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_SEISHIN)
			OR BEDCNT.BEDCNT07 <![CDATA[<>]]> TO_CHAR(MDB.KYOKABYOSHOSU_RYOYO)
			)
		</if>
		<if test="ultDif == 0">
			AND (BEDCNT.BEDCNT_BASE = TO_CHAR(MDB.KYOKABYOSHOSU_SUM)
			AND BEDCNT.BEDCNT04 = TO_CHAR(MDB.KYOKABYOSHOSU_KEKKAKU)
			AND BEDCNT.BEDCNT01 = TO_CHAR(MDB.KYOKABYOSHOSU_IPPAN)
			AND BEDCNT.BEDCNT05 = TO_CHAR(MDB.KYOKABYOSHOSU_KANSEN)
			AND BEDCNT.BEDCNT03 = TO_CHAR(MDB.KYOKABYOSHOSU_SEISHIN)
			AND BEDCNT.BEDCNT07 = TO_CHAR(MDB.KYOKABYOSHOSU_RYOYO)
			)
		</if>
		</where>
		)
	</select>
    <update id="updateNF101Data" parameterType="jp.co.takeda.rdm.entity.join.TRdmHcoNxtReqEntity">
        UPDATE
            T_RDM_HCO_NXT_REQ
        SET
			<if test="pharmType != null">PHARM_TYPE = #{pharmType},</if><if test="pharmType == null">PHARM_TYPE = null,</if>
			<if test="hoInsType != null">HO_INS_TYPE = #{hoInsType},</if><if test="hoInsType == null">HO_INS_TYPE = null,</if>
			<if test="regVisType != null">REG_VIS_TYPE = #{regVisType},</if><if test="regVisType == null">REG_VIS_TYPE = null,</if>
			<if test="insRank != null">INS_RANK = #{insRank},</if><if test="insRank == null">INS_RANK = null,</if>
			<if test="impHosType != null">IMP_HOS_TYPE = #{impHosType},</if><if test="impHosType == null">IMP_HOS_TYPE = null,</if>
			<if test="manageCd != null">MANAGE_CD = #{manageCd},</if><if test="manageCd == null">MANAGE_CD = null,</if>
			<if test="vacInsType != null">VAC_INS_TYPE = #{vacInsType},</if><if test="vacInsType == null">VAC_INS_TYPE = null,</if>
			<if test="vacVisitType != null">VAC_VISIT_TYPE = #{vacVisitType},</if><if test="vacVisitType == null">VAC_VISIT_TYPE = null,</if>
			<if test="bedcntBase != null">BEDCNT_BASE = #{bedcntBase},</if><if test="bedcntBase == null">BEDCNT_BASE = null,</if>
			<if test="bedcnt04 != null">BEDCNT04 = #{bedcnt04},</if><if test="bedcnt04 == null">BEDCNT04 = null,</if>
			<if test="bedcnt01 != null">BEDCNT01 = #{bedcnt01},</if><if test="bedcnt01 == null">BEDCNT01 = null,</if>
			<if test="bedcnt05 != null">BEDCNT05 = #{bedcnt05},</if><if test="bedcnt05 == null">BEDCNT05 = null,</if>
			<if test="bedcnt07 != null">BEDCNT07 = #{bedcnt07},</if><if test="bedcnt07 == null">BEDCNT07 = null,</if>
			<if test="bedcnt02 != null">BEDCNT02 = #{bedcnt02},</if><if test="bedcnt02 == null">BEDCNT02 = null,</if>
			<if test="bedcnt03 != null">BEDCNT03 = #{bedcnt03},</if><if test="bedcnt03 == null">BEDCNT03 = null,</if>
			<if test="bedcnt06 != null">BEDCNT06 = #{bedcnt06},</if><if test="bedcnt06 == null">BEDCNT06 = null,</if>
			<if test="bedsTot != null">BEDS_TOT = #{bedsTot},</if><if test="bedsTot == null">BEDS_TOT = null,</if>
			<if test="medBedsTot != null">MED_BEDS_TOT = #{medBedsTot},</if><if test="medBedsTot == null">MED_BEDS_TOT = null,</if>
			UPD_SHA_YMD = #{updShaYmd},
			UPD_SHA_ID = #{updShaId}
        WHERE
            REQ_ID = #{reqId}
    </update>
    <delete id="deleteByPK" parameterType="jp.co.takeda.rdm.entity.join.TRdmHcoNxtReqEntity">
        DELETE FROM
            T_RDM_HCO_NXT_REQ
        WHERE
            REQ_ID = #{reqId}
    </delete>
</mapper>
